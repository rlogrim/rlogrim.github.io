---
title: R 자료구조와 인덱싱
date: YYYY-MM-DD hh:mm:ss
categories: R
---

### 자료구조(Data structure)란 무엇인가?

자료구조는 **여러 데이터 값을 모아놓은 것**이다.  
데이터를 조직, 처리, 조회, 저장하기 위한 특수 형식으로 특정 목적에 맞게 데이터를 정렬하도록 설계된 것이다.  
사용자가 필요한 데이터에 쉽게 접근하고 작업할 수 있게 해준다.  
R에서는 기본 자료구조로 '벡터(Vectors)', '행렬(Matrices)', '배열(Arrays)', '요인(Factors)', '리스트(Lists)', '데이터프레임(Data Frames)' 등이 있다.  
각 유형을 설명하면서, 인덱싱(indexing, 자료구조의 하위 집합 선택)하는 방법도 정리했으니 한 번 따라해보자.  

<br />

<div class="figure" style="text-align: center">
<img src="http://venus.ifca.unican.es/Rintro/_images/dataStructuresNew.png" alt="[그림] R의 기본 자료구조"  />
<p class="caption">[그림] R의 기본 자료구조</p>
</div>

<br />

### 1. 벡터(vectors)
- 벡터는 동질적(모든 원소는 같은 자료형 또는 같은 모드)이다
- 벡터는 위치로 인덱스된다
- 벡터는 여러 개 위치로 인덱스될 수 있으며, 하위 벡터로 반환된다
- 벡터 원소는 이름을 가질 수 있다
- R에서 단일값(스칼라)은 '원소가 하나인 벡터'로 표현된다


```r
# 벡터 생성
a <- c(1, 2, 3)

# 벡터에 이름 부여
names(a) <- c("Kim", "Lee", "Park")

a
```

```
##  Kim  Lee Park 
##    1    2    3
```

```r
# 2번째 원소 위치로 인덱싱
a[2]
```

```
## Lee 
##   2
```

```r
# 복수 위치로 인덱싱
a[c(1, 2)]
```

```
## Kim Lee 
##   1   2
```

```r
# 이름으로 인덱싱
a["Kim"]
```

```
## Kim 
##   1
```

```r
# R에서 스칼라는 원소가 하나인 벡터로 취급
pi
```

```
## [1] 3.141593
```

<br />

### 2. 리스트(Lists)
- 리스트는 이질적(여러 자료형의 원소들로 구성, 구조화된 다른 객체도 원소로 가능)이다
- 리스트는 위치로 인덱스된다
- 리스트에서 하위 리스트를 추출할 수 있다
- 리스트 원소는 이름을 가질 수 있다


```r
# 리스트 생성
a <- c(1, 2, 3)
b <- c("Kim", "Lee", "Park")
c <- c(pi)
list <- list(a, b, c)

# 리스트에 이름 부여
names(list) <- c("first", "second", "third")

list
```

```
## $first
## [1] 1 2 3
## 
## $second
## [1] "Kim"  "Lee"  "Park"
## 
## $third
## [1] 3.141593
```

```r
# 원소 위치로 인덱싱
list[[1]]
```

```
## [1] 1 2 3
```

```r
# 여러 원소 위치로 인덱싱
list[c(1,3)]
```

```
## $first
## [1] 1 2 3
## 
## $third
## [1] 3.141593
```

```r
# 원소 위치로 인덱싱 [] -> 리스트 반환
list[1]
```

```
## $first
## [1] 1 2 3
```

```r
# 원소 이름으로 인덱싱 [[]]
list[["first"]]
```

```
## [1] 1 2 3
```

```r
# 원소 이름으로 인덱싱 $
list$first
```

```
## [1] 1 2 3
```

```r
# 원소 이름으로 인덱싱 [] -> 리스트 반환
list["first"]
```

```
## $first
## [1] 1 2 3
```

<br />

### 3. 모드(Mode): 물리적인 자료형
- 모든 객체에는 그 객체가 메모리에 어떻게 저장되는지를 가리키는 모드가 있다
- 수치형(numeric), 문자형(character), 리스트(list), 함수(function) 등


```r
# pi 모드 확인
mode(pi)
```

```
## [1] "numeric"
```

```r
# "Moe" 모드 확인
mode("Moe")
```

```
## [1] "character"
```

```r
# list 모드 확인
mode(list("Moe", "Larry"))
```

```
## [1] "list"
```

<br />

### 4. 클래스(Class): 추상적인 자료형
- 거리, 시간의 한 지점, 무게 등 숫자로 나타낼 수 있는 것들


```r
# Date 클래스 생성
d <- as.Date("2021-12-05")

d
```

```
## [1] "2021-12-05"
```

```r
# 모드 확인
mode(d)
```

```
## [1] "numeric"
```

```r
# 클래스 확인
class(d)
```

```
## [1] "Date"
```

<br />

### 5. 행렬(Matrices)
- 2차원


```r
# 벡터 생성
a <- 1:6

# 벡터를 2X3 행렬로 변환
dim(a) <- c(2, 3)

a
```

```
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
```

```r
# 첫째 행 인덱싱
a[1,]
```

```
## [1] 1 3 5
```

```r
# 둘째 열 인덱싱
a[,2]
```

```
## [1] 3 4
```

```r
# 첫째 행, 둘째 열에 있는 원소 인덱싱
a[1,2]
```

```
## [1] 3
```

<br />

### 6. 배열(Arrays)
- n차원


```r
# 벡터 생성
a <- 1:12

# 벡터를 3차원 배열로 변환
dim(a) <- c(2, 2, 3)

a
```

```
## , , 1
## 
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    5    7
## [2,]    6    8
## 
## , , 3
## 
##      [,1] [,2]
## [1,]    9   11
## [2,]   10   12
```

<br />

### 7. 요인(Factors)
- **범주형 변수 다루거나, 변수 순서를 지정해주고 싶을 때 사용** 🔥🔥
- 고유 값으로 이루어진 벡터


```r
# 벡터 생성
a <- c("MON", "TUE", "MON", "MON", "SUN")

# 요인 생성
a <- factor(a, levels=c("MON", "TUE", "WED", "THU", "FRI", "SAT", "SUN"))

a
```

```
## [1] MON TUE MON MON SUN
## Levels: MON TUE WED THU FRI SAT SUN
```

<br />

### 8. 데이터 프레임(Data Frames)
- **앞으로 가장 자주 사용하게 될 자료구조** 🔥🔥
- 행렬처럼 2차원 구조이나 리스트에 가까움
- 원소는 벡터 또는 요인이며, 데이터 프레임의 열에 해당한다
- 열에는 이름이 있어야 한다
- 리스트 연산자를 사용해 열을 추출할 수 있다
- 행렬과 비슷한 표기법으로 데이터를 인덱싱할 수 있다


```r
# 랜덤 벡터 4개 생성
pred1 <- runif(5)
pred2 <- runif(5)
pred3 <- runif(5)
pred4 <- runif(5)

# pred1, pred2, pred3, pred4를 열로 하는 데이터 프레임 생성
frame <- data.frame(pred1, pred2, pred3, pred4)

frame
```

```
##        pred1      pred2      pred3       pred4
## 1 0.08988684 0.09402650 0.13207451 0.798706094
## 2 0.40308861 0.35892133 0.49411163 0.669051191
## 3 0.09187056 0.09804019 0.02344263 0.332063937
## 4 0.29725612 0.68991678 0.10618229 0.003556703
## 5 0.38108569 0.12387053 0.59994658 0.453772225
```

- 데이터 프레임의 열을 인덱싱하는 방법은 다양하다
  - [[]] 연산자를 사용하면 위치 혹은 열 이름으로 인덱싱할 수 있으며, **벡터**를 반환한다
  - [] 연산자를 사용하면 위치 혹은 열 이름으로 인덱싱할 수 있으며, **데이터 프레임**을 반환한다
  - $ 연산자를 사용하면 열 이름으로 인덱싱할 수 있으며, **벡터**를 반환한다
  - 행렬 인덱싱 방법도 사용할 수 있다
- **열 이름**으로 **열**을 인덱싱하는 예시는 아래와 같다

```r
# [[]]를 이용한 pred1 열 인덱싱
frame[["pred1"]]
```

```
## [1] 0.08988684 0.40308861 0.09187056 0.29725612 0.38108569
```

```r
# $를 이용한 pred1 열 인덱싱
frame$pred1
```

```
## [1] 0.08988684 0.40308861 0.09187056 0.29725612 0.38108569
```

```r
# []를 이용한 pred1 열 인덱싱
frame["pred1"]
```

```
##        pred1
## 1 0.08988684
## 2 0.40308861
## 3 0.09187056
## 4 0.29725612
## 5 0.38108569
```

```r
# 행렬 인덱싱을 이용한 pred1 열 인덱싱
frame[,"pred1"]
```

```
## [1] 0.08988684 0.40308861 0.09187056 0.29725612 0.38108569
```

```r
# pred1, pred2 열 인덱싱
frame[c("pred1", "pred2")]
```

```
##        pred1      pred2
## 1 0.08988684 0.09402650
## 2 0.40308861 0.35892133
## 3 0.09187056 0.09804019
## 4 0.29725612 0.68991678
## 5 0.38108569 0.12387053
```

- **위치**로 **열**을 인덱싱하는 방법은 아래를 참고해 보자


```r
# [[]]를 이용한 첫째 열 인덱싱
frame[[1]]
```

```
## [1] 0.08988684 0.40308861 0.09187056 0.29725612 0.38108569
```

```r
# 행렬 인덱싱을 통한 첫째 열 인덱싱
frame[,1]
```

```
## [1] 0.08988684 0.40308861 0.09187056 0.29725612 0.38108569
```

```r
# 첫째, 둘째 열 인덱싱
frame[c(1, 2)]
```

```
##        pred1      pred2
## 1 0.08988684 0.09402650
## 2 0.40308861 0.35892133
## 3 0.09187056 0.09804019
## 4 0.29725612 0.68991678
## 5 0.38108569 0.12387053
```

```r
# 첫째, 둘째 열 인덱싱
frame[1:2]
```

```
##        pred1      pred2
## 1 0.08988684 0.09402650
## 2 0.40308861 0.35892133
## 3 0.09187056 0.09804019
## 4 0.29725612 0.68991678
## 5 0.38108569 0.12387053
```

- 데이터 프레임 **행**도 **위치**로 인덱싱할 수 있으며, **콤마(,) 필수**


```r
# 첫째 행 인덱싱
frame[1,]
```

```
##        pred1     pred2     pred3     pred4
## 1 0.08988684 0.0940265 0.1320745 0.7987061
```

```r
# 첫째, 둘째 행 인덱싱
frame[c(1,2),]
```

```
##        pred1     pred2     pred3     pred4
## 1 0.08988684 0.0940265 0.1320745 0.7987061
## 2 0.40308861 0.3589213 0.4941116 0.6690512
```

```r
# 첫째, 둘째 행 인덱싱
frame[1:2,]
```

```
##        pred1     pred2     pred3     pred4
## 1 0.08988684 0.0940265 0.1320745 0.7987061
## 2 0.40308861 0.3589213 0.4941116 0.6690512
```

- 데이터 프레임 **원소**도 **행렬 인덱싱**으로 선택할 수 있다


```r
# 첫째 행, 둘째 열 원소 인덱싱
frame[1,2]
```

```
## [1] 0.0940265
```

<br />

### 📃참고자료
- [data structures by David Loshin, Sarah Lewis](https://searchsqlserver.techtarget.com/definition/data-structure)
- [First Steps in R](http://venus.ifca.unican.es/Rintro/dataStruct.html)
- [R Cookbook by 폴 티터 저, 이제원 역](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9788966262984&orderClick=LAG&Kc=)

