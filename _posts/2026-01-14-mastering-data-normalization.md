---
title: 데이터를 정규화하는 6가지 방법
author: Rvinci
description: 서로 다른 단위의 데이터를 비교하기 위해 정규화를 고려한 적이 있나요? 엑셀에서 일일이 수식을 입력하던 번거로움에서 벗어나, R을 이용해 손쉽게 정규화하는 6가지 방법을 소개합니다.
excerpt: 서로 다른 단위의 데이터를 비교하기 위해 정규화를 고려한 적이 있나요? 엑셀에서 일일이 수식을 입력하던 번거로움에서 벗어나, R을 이용해 손쉽게 정규화하는 6가지 방법을 소개합니다.
categories: [data]
tags: [r, normalization, ranking, standardization, z-score, min-max normalization, distance to a reference, categorical scale, indicators above/below the mean]
published: true
---

## 정규화는 왜 필요할까요?

데이터 분석을 하다 보면 서로 다른 단위의 데이터를 비교해야 하는 상황을
자주 마주합니다. 예를 들어 인구수와 예산액을 하나의 차트에 그려보면,
숫자의 단위가 너무 커서 비교 자체가 불가능합니다. 이처럼 서로 다른
데이터를 올바르게 비교하기 위해 반드시 거쳐야 하는 과정이 바로
정규화(Normalization)입니다. 엑셀에서는 이를 위해 매번 수식을 복사하고
범위를 지정해야 했지만, R을 활용하면 단 몇 줄의 코드로 수만 줄의
데이터를 오차 없이 처리하고 분석 과정을 자동화할 수 있습니다.

정규화는 단위가 다른 변수를 동일한 선상에 놓을 수 있게 해주고, 너무
크거나 작은 이상치의 영향을 조절하며, 전체 집단 내에서 해당 데이터의
상대적 위치를 직관적으로 보여줍니다.

오늘 소개할 6가지 정규화 기법을 익혀두면 어떤 데이터 문제에도 범용적으로
적용할 수 있습니다.

| 정규화 방법 | 특징 | 장점 | 단점 |
|----|----|----|----|
| 순위(Ranking) | 데이터 값의 순위를 계산 | \- 단순하고 이상치의 영향을 받지 않음<br>- 상대적 비교가 용이 | \- 절대적 정보가 손실됨<br>- 데이터 간 간격에 대한 정보 제공 불가 |
| 표준화(Standardization or z-score) | 평균이 0, 표준편차가 1이 되도록 변환 | \- 값의 분포를 표준화하여 비교 가능<br>- 데이터 간 차이를 반영 | \- 이상치의 영향을 받기 쉬움- 직관적인 해석이 어려움 |
| 최소-최대 정규화(Min-max normalization) | 데이터의 최소값을 0, 최대값을 1로 변환 | \- 값이 항상 0~1 범위에 있어 해석이 직관적<br>- 모든 값이 동일한 스케일로 정규화 | \- 이상치가 있으면 결과 왜곡됨- 새로운 데이터 추가 시 범위 재조정 필요함 |
| 기준값까지의 거리(Distance to a reference) | \- 기준값과의 절대적 거리로 정규화<br>- 기준값은 목표값이나 벤치마크로 설정 | \- 특정 목표나 기준과의 비교가 가능<br>- 결과 해석이 직관적 | \- 기준값 설정의 자의성<br>- 기준값에 따라 결과가 크게 달라질 수 있음 |
| 범주형 척도(Categorical scale) | 값을 범주로 나누고 범주별 점수를 부여 | \- 간단하고 명확한 비교 가능<br>- 이상치의 영향을 받지 않음 | \- 데이터의 연속적 특성이 손실됨<br>- 범주 구분 기준 설정의 자의성 |
| 평균 위/아래 지표(Indicators above/below the mean) | 평균 기준으로 -1(아래), 0(평균), 1(위)로 변환 | \- 이상치의 영향을 받지 않음<br>- 상대적 위치를 직관적으로 표현 가능 | \- 절대적 정보 손실<br>- 평균을 기준으로 한 변환의 자의성 |

이제 순서대로 R을 활용하여 정규화하는 방법을 알아보겠습니다.

## 정규화 실전 적용

이제 엑셀의 복잡한 함수 대신 활용할 수 있는 R 코드를 살펴보겠습니다.
예시 데이터로 `values`라는 숫자 묶음을 사용하여 각 기법을 적용해
보겠습니다.

### 1. 순위(Ranking)

절대적인 숫자보다 ’누가 1등이고 누가 꼴찌인가’가 중요할 때 쓰는
방법입니다. 엑셀의 RANK 함수를 떠올리시면 되는데요, R은 데이터가 많아도
훨씬 빠르고 정확하게 처리해줍니다. 게다가 튀는 값(이상치)이 섞여 있어도
순위가 엉망이 되지 않는다는 게 큰 장점이에요.

``` r
# 예시 데이터 생성
values <- c(100, 200, 150, 50)

# 순위 부여 (가장 작은 값이 1위)
rank(values)
```

    ## [1] 2 4 3 1

### 2. 표준화(Standardization or Z-score)

평균을 0으로 맞춰서 각 데이터가 평균에서 얼마나 떨어져 있는지를 표준편차
단위로 보여주는 방법입니다. 서로 다른 단위의 데이터를 공정하게 비교할 때
꼭 필요한 작업이죠. R의 `scale()` 함수 하나면 엑셀에서 평균, 표준편차
따로 구하고 일일이 계산하던 수고를 한 방에 끝낼 수 있어요.

``` r
# 평균 0, 표준편차 1로 변환
scale(values)
```

    ##            [,1]
    ## [1,] -0.3872983
    ## [2,]  1.1618950
    ## [3,]  0.3872983
    ## [4,] -1.1618950
    ## attr(,"scaled:center")
    ## [1] 125
    ## attr(,"scaled:scale")
    ## [1] 64.54972

### 3. 최소-최대 정규화(Min-max normalization)

모든 값을 0과 1 사이로 바꿔주는 방법입니다. “최댓값 대비 지금 얼마나
되는 거지?”를 한눈에 파악할 수 있어서 그래프 그릴 때 특히 유용해요.
함수를 만들어두면 어떤 데이터에도 적용할 수 있습니다.

``` r
# 최소-최대 정규화 함수 정의
min_max_norm <- function(x) {
  (x - min(x)) / (max(x) - min(x))
}

# 함수 적용
min_max_norm(values)
```

    ## [1] 0.3333333 1.0000000 0.6666667 0.0000000

### 4. 기준값까지의 거리(Distance to a reference)

목표치나 기준점을 정해두고, 실제 값이 거기서 얼마나 떨어져 있는지
계산하는 방식입니다. “목표 달성률이 얼마나 되지?” 같은 성과 지표를 만들
때 쓸모 있어요.

``` r
# 기준값 대비 거리 계산 함수
dist_to_ref <- function(x, ref) {
  abs(x - ref)
}

# 70점을 기준으로 거리 계산
dist_to_ref(values, ref = 70)
```

    ## [1]  30 130  80  20

### 5. 범주형 척도(Categorical scale)

연속된 숫자를 ‘상/중/하’ 같은 그룹으로 나누는 방법입니다. 엑셀에서 IF 문
여러 개 중첩해서 머리 아프게 만들던 작업을, R의 `cut()` 함수로 쉽게
정리할 수 있어요.

``` r
# 구간 나누기 함수
ctg <- function(x, breaks, labels) {
  cut(x, breaks = breaks, labels = labels, include.lowest = TRUE)
}

# 0~100(Low), 101~150(Medium), 151~200(High)
breaks_pts <- c(0, 100, 150, 200)
labels_txt <- c("Low", "Medium", "High")

ctg(values, breaks = breaks_pts, labels = labels_txt)
```

    ## [1] Low    High   Medium Low   
    ## Levels: Low Medium High

### 6. 평균 위/아래 지표(Indicators above/below the mean)

평균을 기준으로 각 값이 평균보다 높은지 낮은지만 보는 방법입니다. 집단
평균 대비 어디에 속하는지 빠르게 파악할 때 효과적이에요.

``` r
# 평균 기준 위(1), 아래(-1), 같음(0) 판별
ab_bl <- function(x) {
  mean_x <- mean(x)
  ifelse(x > mean_x, 1, ifelse(x < mean_x, -1, 0))
}

ab_bl(values)
```

    ## [1] -1  1  1 -1

지금까지 살펴본 6가지 기법은 서로 다른 데이터를 같은 기준으로 비교할 때
사용할 수 있습니다. 엑셀도 당장 눈앞의 숫자 몇 개 바꾸기엔 편하지만,
분석 과정을 체계적으로 기록하고 대량의 데이터를 일관되게 처리하기엔
한계가 있습니다.

R로 정규화 과정을 코드로 만들어두면, 데이터가 바뀌거나 분석 대상이
달라져도 실행 버튼 하나로 결과를 쉽게 얻을 수 있습니다. 여기서 소개한
방법들은 나중에 머신러닝이나 고급 시각화 작업을 할 때도 이용할 수
있습니다. 이제 엑셀의 익숙함에서 한 발짝 나아가, R과 함께 더 체계적이고
전문적인 데이터 분석의 세계로 들어가 보세요!