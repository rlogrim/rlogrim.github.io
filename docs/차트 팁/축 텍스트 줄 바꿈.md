---
layout: post_comments
title: 축 텍스트 줄 바꿈
parent: 차트 팁
published: true
---

# {{ page.title }}
{: .no_toc }

## 목차
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## 축 텍스트 길이가 길어서 서로 중첩될 때

```ggplot2```로 그래프를 그리다보면, 축 텍스트 길이가 길어서 줄 바꿈하고 싶을 때가 있습니다.

## 일정 너비가 넘어가면 줄 바꾸기

첫 번째 방법으로 ```str_wrap``` 함수를 이용해서 축 텍스트 너비가 일정 범위를 넘어서면 줄 바꿈하도록 설정하는 방법이 있습니다.

```str_wrap``` 함수는 [stringr](https://stringr.tidyverse.org/index.html) 패키지에서 제공하는 함수라서 먼저 패키지를 설치해야 합니다.

그리고 아래 코드처럼 width 인자의 숫자를 바꾸면 텍스트 너비를 조정할 수 있습니다.

```R
scale_x_discrete(labels=function(x){str_wrap(x, width=8)})
```

## 특정 문자(괄호, 대쉬 등) 기준으로 줄 바꾸기

두 번째 방법으로 ```sub``` 함수와 정규표현식(regular expression)을 사용해서 특정 문자(괄호, 대쉬, 쉼표, 공백 등)가 시작될 때 줄 바꾸도록 설정하는 방법도 있습니다.

정규표현식에서 괄호는 '\\\\(', 줄 바꿈(line break)은 '\n'으로, 공백문자(whitespace)는 '\\\\s'로 표현합니다.

```R
# 괄호 앞 줄 바꿈
scale_x_discrete(labels=function(x){sub("\\(", "\n\\(", x)})

# 대쉬 뒤 줄 바꿈
scale_x_discrete(labels=function(x){sub("-", "-\n", x)})

# 대쉬 뒤 줄 바꿈 후 공백 줄 바꿈
scale_x_discrete(labels = function(x){
    y=sub("-", "-\n", x)
    sub("\\s", "\n", y)})
```
