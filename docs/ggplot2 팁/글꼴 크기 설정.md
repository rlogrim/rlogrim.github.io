---
layout: post
title: 글꼴 크기 설정
parent: ggplot2 팁
published: true
---

# {{ page.title }}
{: .no_toc }

## 목차
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## theme, geom_text는 다르다

보통 ```theme```에서 글꼴 크기를 설정하면 도표 안의 모든 텍스트 크기를 일괄 조정할 수 있다고 착각하기 쉽습니다.

그러나 ```theme``` 함수로는 축, 범례 등 데이터와 무관한 텍스트 크기만 조정할 수 있습니다.

```geom_text```로 출력되는 텍스트(예: 막대그래프 위의 수치) 크기를 조정하려면, 별도의 작업이 필요합니다.

그리고 ```theme```에서 size는 'pt 단위'로 정의되지만 ```geom_text```에서 size는 'mm 단위'로 정의돼서 주의가 필요합니다.

## 데이터 무관 텍스트(제목, 축, 범례 등) 크기 조정

먼저 [Complete themes](https://ggplot2.tidyverse.org/reference/ggtheme.html)나 ```theme```에서 텍스트 기본 크기(base size)를 10pt로 설정합니다.

```R
# 방법 1
theme_classic(base_size=10)

# 방법2
theme(
    text=element_text(size=10)
)
```

그러나 이렇게 하면 축, 범례 크기가 10pt보다 작게 출력됩니다.

왜일까요? 축 텍스트(```axis.text```)나 범례 텍스트(```legend.text```)의 size가 기본 크기의 0.8배로 출력되도록 설정되어 있기 때문입니다.

그렇다면 어떻게 해야 축이나 범례 텍스트를 10pt로 설정할 수 있을까요?

```rel```로 조정하면 축이나 범레 텍스트가 기본 크기와 같은 크기로 출력되도록 할 수 있습니다.

```R
theme(
    text=element_text(size=10),
    axis.text=element_text(size=rel(1)),
    legend.text=element_text(size=rel(1))
)
```

## 데이터 관련 텍스트 크기 조정

데이터 관련 텍스트 크기를 10pt로 조정하려면 어떻게 해야 할까요?

```geom_text```의 size는 단위가 mm이니까 10pt를 mm 단위로 환산한 값을 넣어줘야 합니다.

1pt : 0.3514598mm => 10pt = 3.514598mm처럼 직접 계산해도 되지만, 더 쉬운 방법도 있습니다.

ggplot에서는 특별한 상수(1mm가 몇 pt인지 나타내는 상수, ```.pt```)가 있는데, 이 상수를 이용하면 글꼴 크기를 쉽게 계산할 수 있습니다.

1mm : ```.pt``` = Xmm : 10pt => X = 10/```.pt```

```R
# 방법 1
geom_text(size=3.514598)

# 방법2
geom_text(size=10/.pt)
```

## 도표가 여러개일 때 글꼴 크기 일괄 조정하는 법

theme.size, geom.text.size처럼 변수를 만들어서 활용하면, 좀더 쉽게 모든 도표의 글꼴 크기를 일괄 조정할 수 있습니다.

아래 코드처럼 글꼴 크기를 10pt로 설정했다가 나중에 모든 글꼴의 크기를 11pt로 바꾸고 싶다면, ```theme.size = 11```로 바꿔주면 됩니다.

```R
# 변수 정의
theme.size = 10
goem.text.size = theme.size/.pt

# geom_text 글꼴 크기 설정
geom_text(size=geom.text.size)

# theme 글꼴 크기 설정
theme(
    text=element_text(size=theme.size),
    axis.text=element_text(size=rel(1)),
    legend.text=element_text(size=rel(1))
)
```

## 참고자료
[Understanding text size and resolution in ggplot2](https://www.christophenicault.com/post/understand_size_dimension_ggplot2/)

[theme-defaults.r](https://github.com/tidyverse/ggplot2/blob/HEAD/R/theme-defaults.r)