{"0": {
    "doc": "About",
    "title": "About",
    "content": "R 팁 저장소는 R 언어를 활용한 데이터 분석과 시각화를 기록하고 공유하는 공간입니다. 주로 tidyverse, sf, ggplot2 등 강력한 R 패키지를 활용하여 데이터 정리, 분석, 그리고 시각화 팁을 간단하게 정리합니다. 이 블로그는 저만의 작업 노하우를 체계적으로 정리하고 필요할 때 쉽게 참조하기 위한 개인 블로그입니다. 간결하고 이해하기 쉬운 코드로 차트와 지도를 그리고, 데이터를 분석하는 것을 목표로 삼고 있습니다. 필요할 때 꺼내 보는 데이터 분석 서랍장이자, R을 사랑하는 모든 분들에게 작게나마 영감을 줄 수 있는 공간이 되기를 바랍니다. 😊 . ",
    "url": "/",
    
    "relUrl": "/"
  },"1": {
    "doc": "y축 범위 조정",
    "title": "y축 범위 조정",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html"
  },"2": {
    "doc": "y축 범위 조정",
    "title": "y축 범위, 왜 신경 써야 할까?",
    "content": "데이터를 시각화할 때 y축 범위는 중요하지 않은 요소로 보일 수 있지만, 사실 그래프의 가독성과 메시지 전달력에 큰 영향을 미칩니다. 적절하지 않은 y축 범위는 데이터의 주요 차이를 흐리거나, 불필요한 여백을 만들어 시각적 집중도를 떨어뜨릴 수 있기 때문입니다. 이 글에서는 붓꽃 데이터셋을 예로 들어, y축 범위 조정이 필요한 상황과 이를 해결하는 방법을 구체적으로 살펴보겠습니다. 붓꽃 데이터셋은 150개의 붓꽃에 대해 꽃받침과 꽃잎의 길이와 너비를 측정한 데이터입니다. 이를 활용해 각 붓꽃 종류별로 꽃받침 길이, 꽃받침 너비, 꽃잎 길이, 꽃잎 너비의 평균을 계산하면 아래와 같은 결과를 얻을 수 있습니다. head(data) . ## # A tibble: 3 × 5 ## 종류 `꽃받침 길이` `꽃받침 너비` `꽃잎 길이` `꽃잎 너비` ## &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 setosa 5.01 3.43 1.46 0.246 ## 2 versicolor 5.94 2.77 4.26 1.33 ## 3 virginica 6.59 2.97 5.55 2.03 . 이 데이터를 기반으로 간단한 시각화를 진행해 보겠습니다. 붓꽃 종류별 평균 꽃받침 길이를 비교하는 막대그래프를 그려보았습니다. ggplot(data=data, aes(x=종류, y=`꽃받침 길이`, label=`꽃받침 길이`)) + geom_col(width=0.6) + geom_text(vjust=-0.5, size=12/.pt) + theme_bw(base_size=12) . 그런데 x축과 막대그래프 사이에 공간이 생겨 시각적으로 불필요한 여백이 발생했습니다. 이 공간을 없애려면 어떻게 해야 할까요? . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html#y%EC%B6%95-%EB%B2%94%EC%9C%84-%EC%99%9C-%EC%8B%A0%EA%B2%BD-%EC%8D%A8%EC%95%BC-%ED%95%A0%EA%B9%8C",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html#y축-범위-왜-신경-써야-할까"
  },"3": {
    "doc": "y축 범위 조정",
    "title": "y축을 0에서 시작하도록 설정",
    "content": "x축과 막대그래프 사이의 여백을 없애려면 y축의 범위를 0에서 시작하도록 설정해야 합니다. 이를 위해 scale_y_continuous 함수의 expand 옵션을 활용할 수 있습니다. expand 옵션은 그래프의 축 끝에 추가되는 여백을 설정하는 데 사용됩니다. 이 여백은 데이터를 더 명확히 표현하거나 그래프의 가독성을 높이는 데 도움을 줄 수 있지만, 불필요한 여백은 제거하는 것이 좋습니다. 다음 코드를 기존 그래프 코드에 추가하면, y축이 정확히 0에서 시작하고 여백이 최소화됩니다. 여기서 mult 매개변수는 축 끝에 추가할 상대적 여백을 설정합니다. 첫 번째 값 0은 y축의 시작점에서 여백을 0으로 설정합니다. 즉, y축이 0에서 시작하게 됩니다. 두 번째 값 0.1은 y축의 끝점에서 총 데이터 범위의 10%에 해당하는 여백을 추가하는 것을 의미합니다. ggplot(data=data, aes(x=종류, y=`꽃받침 길이`, label=`꽃받침 길이`)) + geom_col(width=0.6) + geom_text(vjust=-0.5, size=12/.pt) + scale_y_continuous(expand=expansion(mult=c(0, 0.1))) + theme_bw(base_size=12) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html#y%EC%B6%95%EC%9D%84-0%EC%97%90%EC%84%9C-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8F%84%EB%A1%9D-%EC%84%A4%EC%A0%95",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html#y축을-0에서-시작하도록-설정"
  },"4": {
    "doc": "y축 범위 조정",
    "title": "y축이 데이터 중간에서 시작하도록 설정",
    "content": "경우에 따라 y축을 데이터 중간부터 시작하고 싶을 때가 있습니다. 예를 들어, 비교하고자 하는 값들이 큰 차이가 없는 경우, y축이 0부터 시작하면 중요한 차이를 제대로 드러내기 어렵습니다. 이럴 때는 y축의 범위를 데이터의 중간값이나 원하는 구간으로 조정하면 됩니다. 이를 위해 coord_cartesian 함수를 사용할 수 있습니다. ggplot(data=data, aes(x=종류, y=`꽃받침 길이`, label=`꽃받침 길이`)) + geom_col(width=0.6) + geom_text(vjust=-0.5, size=12/.pt) + scale_y_continuous(expand=expansion(mult=c(0, 0.1))) + coord_cartesian(ylim=c(3, 7)) + theme_bw(base_size=12) . 그래프의 작은 설정 하나가 시각화의 가독성과 전달력을 크게 바꿀 수 있습니다. 오늘 다룬 y축 범위 조정 팁을 활용해 데이터를 더 명확히 전달할 수 있는 그래프를 만들어 보세요 😊 . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html#y%EC%B6%95%EC%9D%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%91%EA%B0%84%EC%97%90%EC%84%9C-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8F%84%EB%A1%9D-%EC%84%A4%EC%A0%95",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/y%EC%B6%95%20%EB%B2%94%EC%9C%84%20%EC%A1%B0%EC%A0%95.html#y축이-데이터-중간에서-시작하도록-설정"
  },"5": {
    "doc": "글꼴 변경",
    "title": "글꼴 변경",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html"
  },"6": {
    "doc": "글꼴 변경",
    "title": "필요한 패키지 준비",
    "content": "차트의 글꼴을 변경하려면 먼저 showtext 패키지를 설치하고 로드해야 합니다. 이 패키지는 R 그래프에서 다양한 글꼴을 쉽게 사용할 수 있도록 도와줍니다. showtext 기능을 활성화하면, 새로 생성되는 그래픽 장치(graphic device)에서 텍스트가 showtext를 통해 출력됩니다. install.packages(\"showtext\") # 패키지 설치 library(showtext) # 패키지 로드 . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#%ED%95%84%EC%9A%94%ED%95%9C-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%A4%80%EB%B9%84",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#필요한-패키지-준비"
  },"7": {
    "doc": "글꼴 변경",
    "title": "컴퓨터에 설치된 글꼴 불러오기",
    "content": "컴퓨터에 설치된 글꼴을 사용하려면 글꼴 파일의 경로를 알아야 합니다. | Windows 기준으로, 제어판 &gt; 모양 및 개인 설정 &gt; 글꼴 경로에서 원하는 글꼴을 찾습니다. | 해당 글꼴을 마우스 오른쪽 버튼으로 클릭하고, 속성에서 경로를 확인합니다. | . font_add 함수를 사용하여 R에서 글꼴을 등록할 수 있습니다. 예를 들어, 아래와 같이 Kopub 돋움체 글꼴을 사용할 수 있습니다. 등록한 글꼴은 kopub이라는 이름으로 사용할 수 있습니다. font_add(\"kopub\", \"C:/Users/.../AppData/Local/Microsoft/Windows/Fonts/Kopubdotummedium.ttf\") . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#%EC%BB%B4%ED%93%A8%ED%84%B0%EC%97%90-%EC%84%A4%EC%B9%98%EB%90%9C-%EA%B8%80%EA%BC%B4-%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#컴퓨터에-설치된-글꼴-불러오기"
  },"8": {
    "doc": "글꼴 변경",
    "title": "showtext 자동 사용 설정",
    "content": "showtext 기능을 자동으로 활성화하면, 매번 수동으로 설정하지 않아도 됩니다. 이와 함께 dpi 설정도 변경할 수 있습니다. 기본 dpi는 96으로 설정되어 있지만, 인쇄용 그래프에서는 300dpi를 추천합니다. 이제 모든 그래프에 showtext 기능이 적용됩니다. showtext_auto() # showtext 자동 활성화 showtext_opts(dpi=300) # dpi 300 설정 . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#showtext-%EC%9E%90%EB%8F%99-%EC%82%AC%EC%9A%A9-%EC%84%A4%EC%A0%95",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#showtext-자동-사용-설정"
  },"9": {
    "doc": "글꼴 변경",
    "title": "ggplot2에서 글꼴 적용하기",
    "content": "ggplot2를 사용하는 경우, geom_text나 theme에서 글꼴을 설정할 수 있습니다. 예를 들어, 아래와 같이 Kopub 돋움체 글꼴을 적용할 수 있습니다. ggplot(data = mtcars, aes(x = wt, y = mpg)) + geom_point() + geom_text(aes(label = rownames(mtcars)), family = \"kopub\") + theme_minimal(base_family = \"kopub\") . 이렇게 하면 R 차트에서 원하는 글꼴을 적용할 수 있습니다. 글꼴을 바꾸면 그래프의 가독성과 디자인이 한층 개선되니, 다양한 글꼴을 시도해 보세요! . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#ggplot2%EC%97%90%EC%84%9C-%EA%B8%80%EA%BC%B4-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%EB%B3%80%EA%B2%BD.html#ggplot2에서-글꼴-적용하기"
  },"10": {
    "doc": "글꼴 크기 설정",
    "title": "글꼴 크기 설정",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html"
  },"11": {
    "doc": "글꼴 크기 설정",
    "title": "theme과 geom_text의 차이점",
    "content": "R에서 차트의 텍스트 크기를 조정하는 방법에 대해 알아보겠습니다. theme과 geom_text를 적절히 사용하면 도표에 필요한 모든 텍스트 크기를 효과적으로 설정할 수 있습니다. 많은 사람들이 theme 함수로 차트 안의 모든 텍스트 크기를 조정할 수 있다고 생각하지만, 이는 정확하지 않습니다. theme으로는 축, 범례 등 데이터와 무관한 텍스트의 크기만 조정할 수 있습니다. 반면, geom_text로 출력되는 데이터 관련 텍스트(예: 막대그래프 위의 수치)는 별도로 크기를 설정해야 합니다. 또한, theme에서 크기 단위는 ‘pt’이고, geom_text에서는 ‘mm’로 정의되므로 이 차이를 반드시 유념해야 합니다. ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#theme%EA%B3%BC-geom_text%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#theme과-geom_text의-차이점"
  },"12": {
    "doc": "글꼴 크기 설정",
    "title": "데이터와 무관한 텍스트 크기 조정하기",
    "content": "theme을 사용하여 제목, 축, 범례 등의 텍스트 크기를 설정할 수 있습니다. 기본 텍스트 크기를 10pt로 설정하는 방법은 아래와 같습니다. # 방법 1: 기본 테마 사용 theme_classic(base_size=10) # 방법2 : 사용자 지정 테마 사용 theme( text=element_text(size=10) ) . 그러나 이렇게 설정해도 축이나 범례 텍스트는 기본 크기의 0.8배로 출력됩니다. 이 값을 기본 크기와 같게 만들려면 rel을 사용해 조정할 수 있습니다. theme( text=element_text(size=10), axis.text=element_text(size=rel(1)), legend.text=element_text(size=rel(1)) ) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%99%80-%EB%AC%B4%EA%B4%80%ED%95%9C-%ED%85%8D%EC%8A%A4%ED%8A%B8-%ED%81%AC%EA%B8%B0-%EC%A1%B0%EC%A0%95%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#데이터와-무관한-텍스트-크기-조정하기"
  },"13": {
    "doc": "글꼴 크기 설정",
    "title": "데이터 관련 텍스트 크기 조정하기",
    "content": "geom_text를 사용하여 데이터 관련 텍스트(예: 그래프 위의 수치) 크기를 설정할 수 있습니다. 이때, geom_text에서 사용하는 단위는 ‘mm’입니다. 10pt를 mm로 환산하려면 다음과 같이 계산합니다: . | 1pt = 0.3514598mm | 10pt = 3.514598mm | . 하지만, 직접 계산하지 않고도 ggplot2에서 제공하는 .pt 상수를 사용하면 쉽게 크기를 설정할 수 있습니다.pt 상수를 사용하면 pt 단위를 mm로 간단히 변환할 수 있어 편리합니다. # 방법 1: 직접 계산 geom_text(size=3.514598) # 방법 2: .pt 상수 사용 geom_text(size=10/.pt) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B4%80%EB%A0%A8-%ED%85%8D%EC%8A%A4%ED%8A%B8-%ED%81%AC%EA%B8%B0-%EC%A1%B0%EC%A0%95%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#데이터-관련-텍스트-크기-조정하기"
  },"14": {
    "doc": "글꼴 크기 설정",
    "title": "여러 차트의 글꼴 크기 일괄 조정하기",
    "content": "차트가 여러 개 있을 경우, 글꼴 크기를 일괄적으로 조정하면 효율적입니다. 아래처럼 변수로 글꼴 크기를 정의하면, 이후에 해당 변수를 변경하는 것만으로도 모든 차트의 텍스트 크기를 수정할 수 있습니다. 변수를 활용하면 글꼴 크기를 손쉽게 적용할 수 있어, 여러 차트에 동일한 설정을 적용하거나 수정할 때 유용합니다. # 변수 정의 theme.size = 10 # pt 단위 goem.text.size = theme.size/.pt # mm 단위 # geom_text 글꼴 크기 설정 geom_text(size=geom.text.size) # theme 글꼴 크기 설정 theme( text=element_text(size=theme.size), axis.text=element_text(size=rel(1)), legend.text=element_text(size=rel(1)) ) . 이제 여러분도 차트의 텍스트 크기를 자유롭게 조정할 수 있을 것입니다. 글꼴 크기를 적절하게 설정해 차트의 가독성을 높이세요! . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#%EC%97%AC%EB%9F%AC-%EC%B0%A8%ED%8A%B8%EC%9D%98-%EA%B8%80%EA%BC%B4-%ED%81%AC%EA%B8%B0-%EC%9D%BC%EA%B4%84-%EC%A1%B0%EC%A0%95%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EA%B8%80%EA%BC%B4%20%ED%81%AC%EA%B8%B0%20%EC%84%A4%EC%A0%95.html#여러-차트의-글꼴-크기-일괄-조정하기"
  },"15": {
    "doc": "날짜 다루기",
    "title": "날짜 다루기",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html"
  },"16": {
    "doc": "날짜 다루기",
    "title": "개요",
    "content": "R에서 시계열 데이터(time-series data)를 이용해 도표를 작성할 때 날짜를 다루는 팁을 정리했습니다. 이번 포스팅에서는 국가별 코로나19 확진자 수 데이터를 활용해 날짜 처리 방법과 ggplot2를 활용한 시계열 그래프 작성법을 소개합니다. 데이터는 Our World in Data에서 가져온 데이터를 사용합니다. ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%EA%B0%9C%EC%9A%94",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#개요"
  },"17": {
    "doc": "날짜 다루기",
    "title": "날짜 데이터 처리의 어려움",
    "content": "날짜 데이터를 다루는 데 있어 다음과 같은 어려움이 있을 수 있습니다: . | 다양한 형식: “2020-08-08”, “2020/08/08”, “20-08-08”, “2020년 8월 8일” 등 여러 형식이 있습니다 | 순서 문제: 날짜 데이터를 문자형(character)으로 불러오면 정렬이 비정상적일 수 있습니다 | 수학적 계산의 어려움: 날짜는 숫자형(numeric) 데이터와 달라서, 일반적인 ‘+’나’-’ 연산으로 기간을 계산할 수 없습니다 | . 이 문제들을 해결하기 위해 lubridate 패키지를 활용할 수 있습니다. lubridate 공식 문서를 참고하세요. ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%EB%82%A0%EC%A7%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B2%98%EB%A6%AC%EC%9D%98-%EC%96%B4%EB%A0%A4%EC%9B%80",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#날짜-데이터-처리의-어려움"
  },"18": {
    "doc": "날짜 다루기",
    "title": "데이터 준비 및 날짜 변환",
    "content": "이번에 사용하는 데이터는 국가별 코로나19 데이터로, 각 날짜별 신규 확진자 수(new_cases)를 포함하고 있습니다. 데이터의 주요 열은 다음과 같습니다: . | date: 확진자가 보고된 날짜(문자형) | location: 국가명(예: South Korea) | new_cases: 해당 날짜의 신규 확진자 수 | . 이 데이터를 이용해 우리나라의 신규 확진자 데이터를 필터링하고, 날짜를 처리해 보겠습니다. # 패키지 로드 library(tidyverse) library(lubridate) # 데이터 불러오기 data &lt;- read.csv(\"owid-covid-data.csv\") # 한국 데이터 필터링 및 열 선택 data_korea &lt;- data %&gt;% filter(location==\"South Korea\") %&gt;% select(date, new_cases) # 데이터 구조 확인 str(data_korea) . ## 'data.frame': 1034 obs. of 2 variables: ## $ date : chr \"2020-01-22\" \"2020-01-23\" \"2020-01-24\" \"2020-01-25\" ... ## $ new_cases: num NA 0 1 0 1 1 0 0 0 7 ... 이제 lubridate의 ymd 함수를 사용하여 date 열을 문자형에서 날짜(Date) 클래스로 변환하겠습니다. 이 데이터는 2020년 1월 22일부터 2022년 11월 20일까지 한국의 신규 확진자 수 정보를 담고 있습니다. 신규 확진자 수가 적을 때는 0명, 많을 때는 621,317명까지도 나온 적이 있습니다. # 날짜 변환 data_korea &lt;- data_korea %&gt;% mutate(date=ymd(date)) # 데이터 요약 summary(data_korea) . ## date new_cases ## Min. :2020-01-22 Min. : 0 ## 1st Qu.:2020-10-06 1st Qu.: 168 ## Median :2021-06-21 Median : 967 ## Mean :2021-06-21 Mean : 25733 ## 3rd Qu.:2022-03-06 3rd Qu.: 13004 ## Max. :2022-11-20 Max. :621317 ## NA's :1 . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84-%EB%B0%8F-%EB%82%A0%EC%A7%9C-%EB%B3%80%ED%99%98",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#데이터-준비-및-날짜-변환"
  },"19": {
    "doc": "날짜 다루기",
    "title": "x축 날짜 표시",
    "content": "x축에 날짜를 표시할 때는 scale_x_date를 사용합니다. 예를 들어, 한국의 신규 확진자 수를 나타내는 막대그래프는 아래와 같이 작성할 수 있습니다. 이 코드는 x축에 3개월 간격으로 날짜를 표시하고, 년-월 형식으로 라벨이 표시되도록 합니다. ggplot(data=data_korea, aes(x=date, y=new_cases)) + geom_col() + scale_x_date(name=\"\", breaks=seq(ymd('2020-01-20'),ymd('2022-11-20'), by='3 month'), date_labels=\"%Y-%m\" ) + scale_y_continuous(name=\"신규 확진자 수(명)\") + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#x%EC%B6%95-%EB%82%A0%EC%A7%9C-%ED%91%9C%EC%8B%9C",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#x축-날짜-표시"
  },"20": {
    "doc": "날짜 다루기",
    "title": "날짜 라벨 줄 바꿈 및 회전",
    "content": "날짜 라벨이 길어 겹치는 경우, 텍스트 줄 바꿈이나 회전을 통해 해결할 수 있습니다. 1. 라벨 줄 바꿈 . labels 인자에 함수를 지정하여 날짜 형식을 변환합니다. 예를 들어, 년-월-일 형식을 년도와 월-일을 구분하여 줄 바꾸기를 할 수 있습니다. ggplot(data=data_korea, aes(x=date, y=new_cases)) + geom_col() + scale_x_date(name=\"\", breaks=seq(ymd('2020-01-20'),ymd('2022-11-20'), by='3 month'), labels=function(x) sub(\"-\", \"-\\n\", as.character(x)) # 년도 다음 대쉬 뒤 줄 바꿈 ) + scale_y_continuous(name=\"신규 확진자 수(명)\") + theme_bw() . 2. 라벨 회전 . 줄 바꿈 말고도, 텍스트를 회전하는 방법도 있습니다. theme 함수의 axis.text.x 옵션으로 라벨 각도를 설정할 수 있습니다. ggplot(data=data_korea, aes(x=date, y=new_cases)) + geom_col() + scale_x_date(name=\"\", breaks=seq(ymd('2020-01-20'),ymd('2022-11-20'), by='3 month'), ) + scale_y_continuous(name=\"신규 확진자 수(명)\") + theme_bw() + theme( axis.text.x=element_text(angle=45, hjust=1, vjust=1) ) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%EB%82%A0%EC%A7%9C-%EB%9D%BC%EB%B2%A8-%EC%A4%84-%EB%B0%94%EA%BF%88-%EB%B0%8F-%ED%9A%8C%EC%A0%84",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#날짜-라벨-줄-바꿈-및-회전"
  },"21": {
    "doc": "날짜 다루기",
    "title": "월 단위 데이터 처리",
    "content": "일 단위 시계열 데이터를 월 단위로 요약하고 싶다면, format 함수를 사용해 년월 열을 생성한 후 그룹화하여 집계하면 됩니다. # 년월 열 생성 및 집계 data_korea_monthly &lt;- data_korea %&gt;% mutate(년월=format(date, \"%Y-%m\")) %&gt;% group_by(년월) %&gt;% summarise(new_cases=sum(new_cases, na.rm = TRUE)) # 데이터 확인 head(data_korea_monthly) . ## # A tibble: 6 × 2 ## 년월 new_cases ## &lt;chr&gt; &lt;dbl&gt; ## 1 2020-01 10 ## 2 2020-02 3139 ## 3 2020-03 6636 ## 4 2020-04 988 ## 5 2020-05 729 ## 6 2020-06 1347 . 이후 scale_x_discrete을 사용해 x축을 설정하고, 라벨의 년도와 월을 줄 바꿈으로 표시할 수 있습니다. ggplot(data_korea_monthly, aes(x=년월, y=new_cases)) + geom_col() + scale_x_discrete(name=\"\", labels = function(x) sub(\"-\", \"\\n\", x) ) + scale_y_continuous(name=\"신규 확진자 수(명)\") + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%EC%9B%94-%EB%8B%A8%EC%9C%84-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B2%98%EB%A6%AC",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#월-단위-데이터-처리"
  },"22": {
    "doc": "날짜 다루기",
    "title": "특정 월에만 년도 표시",
    "content": "1월에만 년도를 표기하고 싶다면, scale_x_discrete의 labels 인자를 활용하면 됩니다. | 대쉬 뒤 줄 바꿈: sub 함수 이용 | 1월 해당 여부 파악: grepl 함수 이용 | 1월 해당하지 않으면 년도 삭제: ifelse, sub 함수 이용 | . ggplot(data=data_korea_monthly, aes(x=년월, y=new_cases)) + geom_col() + scale_x_discrete(name=\"\", labels=function(x){ y=sub(\"-\", \"\\n\", x) ifelse(!grepl(\".*(01)$\", y), sub(\"^\\\\d{4}\", \"\", y), y) }) + scale_y_continuous(name=\"신규 확진자 수(명)\") + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%ED%8A%B9%EC%A0%95-%EC%9B%94%EC%97%90%EB%A7%8C-%EB%85%84%EB%8F%84-%ED%91%9C%EC%8B%9C",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#특정-월에만-년도-표시"
  },"23": {
    "doc": "날짜 다루기",
    "title": "자잘한 수정",
    "content": "그래프를 좀 더 예쁘게 만들어 보겠습니다. | y축 숫자 단위 만 명으로 수정 | 막대그래프가 x축과 맞닿도록 수정 | 막대그래프 위에 숫자 표시 | 글꼴 및 색상 변경 | . # 글꼴 변경 library(showtext) font_add_google(\"Noto Sans KR\", \"noto\") showtext_auto() showtext_opts(dpi=300) theme.size = 10 geom.text.size = theme.size/.pt # 그래프 작성 ggplot(data=data_korea_monthly, aes(x=년월, y=new_cases/10000, label=scales::comma(new_cases/10000, accuracy=1)) ) + geom_col(fill=\"#9AD1F5\") + geom_text(size=geom.text.size, family=\"noto\", vjust=-0.5) + scale_x_discrete(name=\"\", labels=function(x){ y=sub(\"-\", \"\\n\", x) ifelse(!grepl(\".*(01)$\", y), sub(\"^\\\\d{4}\", \"\", y), y) }) + scale_y_continuous(name=\"신규 확진자 수(만 명)\", labels=scales::comma_format(), expand=expansion(mult=c(0, 0.2))) + theme_bw(base_size=theme.size, base_family=\"noto\") . 위에서 소개한 방법을 활용하면 R에서 날짜 데이터를 효과적으로 처리하고, ggplot2를 이용해 가독성 높은 시각화를 제작할 수 있습니다. 코로나19 데이터를 활용해 날짜 데이터를 다루는 연습을 해보고, 다양한 데이터셋에 적용해 보세요. 날짜 데이터는 까다롭지만, 적절한 도구를 사용하면 쉽고 간편하게 다룰 수 있습니다. 이제 시계열 데이터를 활용한 멋진 그래프를 만들어 보세요! . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#%EC%9E%90%EC%9E%98%ED%95%9C-%EC%88%98%EC%A0%95",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%82%A0%EC%A7%9C%20%EB%8B%A4%EB%A3%A8%EA%B8%B0.html#자잘한-수정"
  },"24": {
    "doc": "녹지, 수계, 도로 추가하기",
    "title": "녹지, 수계, 도로 추가하기",
    "content": " ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html"
  },"25": {
    "doc": "녹지, 수계, 도로 추가하기",
    "title": "개요",
    "content": "행정구역 경계만 표시된 지도는 때로는 너무 단조롭게 보일 수 있습니다. 이를 개선하기 위해 산지, 녹지, 수계, 도로 등의 정보를 추가하여 더 풍성한 지도를 만드는 방법을 소개합니다. 이번 글에서는 행정구역 경계에 다양한 지형 데이터를 병합해 시각화하는 과정을 설명합니다. ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#%EA%B0%9C%EC%9A%94",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#개요"
  },"26": {
    "doc": "녹지, 수계, 도로 추가하기",
    "title": "데이터 다운로드",
    "content": "먼저 필요한 데이터를 다운로드합니다. 행정구역 경계, 산지, 녹지, 수계, 도로 데이터는 V-World 디지털트윈국토에서 다운받을 수 있습니다. 모든 데이터의 좌표계는 GRS80(EPSG:5186)으로 동일하기 때문에 좌표계를 일치시키는 추가 작업은 필요하지 않습니다. | 데이터 | 게시물 | 좌표계 | . | 행정구역 경계 | 행정구역시군구_경계 | GRS80(EPSG:5186) | . | 산지 | (연속주제)_산지관리/보전준보전산지 | GRS80(EPSG:5186) | . | 녹지 | (연속주제)_국토계획/공간시설 | GRS80(EPSG:5186) | . | 수계 | 실폭하천 | GRS80(EPSG:5186) | . | 도로 | (도로명주소)실폭도로 | GRS80(EPSG:5186) | . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#데이터-다운로드"
  },"27": {
    "doc": "녹지, 수계, 도로 추가하기",
    "title": "데이터 로드 및 병합",
    "content": "다운로드한 데이터 파일을 불러와 병합합니다. 먼저 행정구역 경계 데이터를 읽어옵니다. st_read 함수를 사용해 이전에 만들어 놓은 ‘수도권 행정구 병합 지도.shp’를 로드합니다. 다음으로 산지, 녹지, 수계, 도로 데이터를 각각 불러오고, lapply와 bind_rows를 사용해 하나로 병합합니다. 이렇게 하면 각 데이터셋을 개별 데이터프레임으로 저장할 수 있습니다. # 패키지 로드 library(tidyverse) library(sf) # 행정구역 경계 지도 로드 sgg &lt;- st_read(\"아웃풋/수도권 행정구 병합 지도.shp\") . ## Reading layer `수도권 행정구 병합 지도' from data source ## `C:\\...\\아웃풋\\수도권 행정구 병합 지도.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 66 features and 2 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -10044.95 ymin: 477264 xmax: 274945.2 ymax: 631207.8 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 . # 녹지 데이터 로드 및 병합 folder_path &lt;- \"데이터/수도권 지도/녹지\" shp_files &lt;- list.files(folder_path, pattern = \"*.shp$\", full.names = TRUE) green &lt;- shp_files %&gt;% lapply(st_read) %&gt;% bind_rows() . ## Reading layer `LSMD_CONT_UF801_11_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\녹지\\LSMD_CONT_UF801_11_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 2746 features and 6 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 180545 ymin: 536547.4 xmax: 216242.3 ymax: 566863.5 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## Reading layer `LSMD_CONT_UF801_28_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\녹지\\LSMD_CONT_UF801_28_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 11419 features and 6 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -9784.98 ymin: 480803.7 xmax: 180740 ymax: 600760.8 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## Reading layer `LSMD_CONT_UF801_41_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\녹지\\LSMD_CONT_UF801_41_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 102710 features and 6 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 144898.3 ymin: 477264 xmax: 274945.2 ymax: 631003.6 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 . # 도로 데이터 로드 및 병합 folder_path &lt;- \"데이터/수도권 지도/도로\" shp_files &lt;- list.files(folder_path, pattern = \"*.shp$\", full.names = TRUE) road &lt;- shp_files %&gt;% lapply(st_read) %&gt;% bind_rows() . ## Reading layer `TL_SPRD_RW_11_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\도로\\TL_SPRD_RW_11_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 47497 features and 3 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 935191.8 ymin: 1936897 xmax: 972009.9 ymax: 1966268 ## Projected CRS: KGD2002 / Unified CS ## Reading layer `TL_SPRD_RW_28_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\도로\\TL_SPRD_RW_28_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 31538 features and 3 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 746395.8 ymin: 1892781 xmax: 937609.2 ymax: 2001859 ## Projected CRS: KGD2002 / Unified CS ## Reading layer `TL_SPRD_RW_41_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\도로\\TL_SPRD_RW_41_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 183486 features and 3 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 900421.6 ymin: 1876369 xmax: 1027786 ymax: 2030482 ## Projected CRS: KGD2002 / Unified CS . # 산지 데이터 로드 및 병합 folder_path &lt;- \"데이터/수도권 지도/산지\" shp_files &lt;- list.files(folder_path, pattern = \"*.shp$\", full.names = TRUE) mt &lt;- shp_files %&gt;% lapply(st_read) %&gt;% bind_rows() . ## Reading layer `N3A_E0032111' from data source ## `C:\\...\\데이터\\수도권 지도\\산지\\N3A_E0032111.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 25848 features and 3 fields ## Geometry type: POLYGON ## Dimension: XY ## Bounding box: xmin: 43318.07 ymin: 69452.81 xmax: 545860.4 ymax: 645438.5 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 . # 수계 데이터 로드 및 병합 folder_path &lt;- \"데이터/수도권 지도/수계\" shp_files &lt;- list.files(folder_path, pattern = \"*.shp$\", full.names = TRUE) water &lt;- shp_files %&gt;% lapply(st_read) %&gt;% bind_rows() . ## Reading layer `LSMD_CONT_UQ162_11_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\수계\\LSMD_CONT_UQ162_11_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 4910 features and 6 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 181897.2 ymin: 537118.7 xmax: 216180.6 ymax: 566276.3 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## Reading layer `LSMD_CONT_UQ162_28_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\수계\\LSMD_CONT_UQ162_28_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 3731 features and 6 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 139941.5 ymin: 528001.1 xmax: 180674.4 ymax: 576213.6 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## Reading layer `LSMD_CONT_UQ162_41_202411' from data source ## `C:\\...\\데이터\\수도권 지도\\수계\\LSMD_CONT_UQ162_41_202411.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 20469 features and 6 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 158529.7 ymin: 480072.7 xmax: 270289.8 ymax: 624000.6 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A1%9C%EB%93%9C-%EB%B0%8F-%EB%B3%91%ED%95%A9",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#데이터-로드-및-병합"
  },"28": {
    "doc": "녹지, 수계, 도로 추가하기",
    "title": "데이터 가공",
    "content": "녹지 데이터는 국토계획/공간시설 데이터에서 필요하지 않은 부분을 제거하여 만듭니다. 용도지역지구 표준분류코드를 참고해서 녹지를 추려낼 수 있습니다. 이번에는 공간시설 중 광장(UQT100)을 제외한 공원, 녹지, 유원지, 공공공지, 도시자연공원구역 등을 모두 녹지로 보았습니다. 따라서, 광장(UQT100)은 녹지와 관련이 없으므로 filter 함수를 사용해 제외합니다. 이를 위해 MNUM 열에서 특정 문자열을 추출하고, 조건에 맞지 않는 데이터를 걸러냅니다. green &lt;- green %&gt;% mutate(no = substr(MNUM, 21, 24)) %&gt;% filter(no != \"UQT1\") . 산지와 수계 데이터는 전국 단위로 제공되기 때문에 수도권에 해당하는 부분만 잘라냅니다. 이를 위해 st_intersection 함수를 사용하여 행정구역 경계(sgg)와 겹치는 부분만 남깁니다. 이렇게 하면 불필요한 데이터가 제거되고, 지도에 적합한 데이터만 남게 됩니다. water &lt;- st_intersection(water, sgg) mt &lt;- st_intersection(mt, sgg) . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%80%EA%B3%B5",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#데이터-가공"
  },"29": {
    "doc": "녹지, 수계, 도로 추가하기",
    "title": "하나의 지도로 그리기",
    "content": "정리된 데이터를 기반으로 ggplot2 패키지를 사용해 지도를 그립니다. geom_sf 함수를 사용하여 각 데이터셋(행정구역, 녹지, 산지, 수계, 도로)을 별도의 레이어로 추가합니다. 시각적인 구분을 위해 채우기 색상(fill)과 경계선 색상(colour), 두께(size)를 지정합니다. 마지막으로, theme_void를 적용하여 축과 배경을 제거하고 데이터를 돋보이게 합니다. ggplot() + geom_sf(data = sgg, colour=NA, fill=\"#eaeaea\") + # 시군구 영역 geom_sf(data = green, colour=NA, fill=\"#A0D097\") + # 녹지 geom_sf(data = mt, colour=NA, fill=\"#A0D097\") + # 산지 geom_sf(data = water, colour=NA, fill=\"#A5D1F2\") + # 수계 geom_sf(data = road, colour=NA, fill=\"white\", size=0.1) + # 도로 geom_sf(data = sgg, colour=\"white\", fill=NA, size=1.3) + # 시군구 경계 geom_sf(data = sgg, colour=\"gray40\", fill=NA, size=0.5) + # 시군구 경계 theme_void() . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#%ED%95%98%EB%82%98%EC%9D%98-%EC%A7%80%EB%8F%84%EB%A1%9C-%EA%B7%B8%EB%A6%AC%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%EB%85%B9%EC%A7%80,%20%EC%88%98%EA%B3%84,%20%EB%8F%84%EB%A1%9C%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0.html#하나의-지도로-그리기"
  },"30": {
    "doc": "데이터 가공 팁",
    "title": "데이터 가공 팁",
    "content": "데이터를 정돈하고 준비하는 과정에서 효율적인 R 코딩 방법을 정리합니다. tidyverse 패키지를 주로 활용하여 복잡한 데이터셋을 다루기 쉽도록 정리, 변환, 필터링하는 팁을 설명합니다. ",
    "url": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81",
    
    "relUrl": "/docs/데이터 가공 팁"
  },"31": {
    "doc": "둘 이상의 속성 시각화",
    "title": "둘 이상의 속성 시각화",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html"
  },"32": {
    "doc": "둘 이상의 속성 시각화",
    "title": "개요",
    "content": "여러 속성을 한눈에 시각화하는 방법을 알아보겠습니다. 이번 예제에서는 붓꽃 데이터셋(iris)을 활용해 다양한 속성을 시각화하는 팁을 소개합니다. 데이터에는 붓꽃의 종류별로 꽃받침 길이, 꽃받침 너비, 꽃잎 길이, 꽃잎 너비 등이 포함되어 있습니다. 먼저 데이터를 ggplot2로 그리기 쉽도록 pivot_longer를 사용해 데이터를 ‘longer’ 형태로 변환하겠습니다. 이 과정을 통해 여러 속성이 하나의 열로 묶이고, 각각의 값이 새로운 열에 담기게 됩니다. # 패키지 로드 library(tidyverse) # 데이터 불러오기 data &lt;- iris %&gt;% rename(`꽃받침 길이` = Sepal.Length, `꽃받침 너비` = Sepal.Width, `꽃잎 길이` = Petal.Length, `꽃잎 너비` = Petal.Width, 종류 = Species) %&gt;% group_by(종류) %&gt;% summarise_if(is.numeric, ~sum(.)/n()) # 데이터 변환 data2 &lt;- data %&gt;% pivot_longer(cols = `꽃받침 길이`:`꽃잎 너비`, names_to = \"구분\", values_to = \"값\") # 데이터 확인 head(data2) . ## # A tibble: 6 × 3 ## 종류 구분 값 ## &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 setosa 꽃받침 길이 5.01 ## 2 setosa 꽃받침 너비 3.43 ## 3 setosa 꽃잎 길이 1.46 ## 4 setosa 꽃잎 너비 0.246 ## 5 versicolor 꽃받침 길이 5.94 ## 6 versicolor 꽃받침 너비 2.77 . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#%EA%B0%9C%EC%9A%94",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#개요"
  },"33": {
    "doc": "둘 이상의 속성 시각화",
    "title": "하나의 그래프로 그리기",
    "content": "변환된 데이터를 활용해 모든 속성을 하나의 그래프로 시각화합니다. | x축: 구분 | y축: 값 | 종류별로 그룹과 색상 구분 | . ggplot(data = data2, aes(x = 구분, y = 값, group = 종류, fill = 종류)) + geom_col(position=position_dodge(width = 0.7), width = 0.6) + geom_text(aes(label=scales::comma(값, accuracy = .1)), position=position_dodge(width = 0.7), vjust = -0.5) + scale_y_continuous(expand = expansion(mult = c(0, 0.1))) + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#%ED%95%98%EB%82%98%EC%9D%98-%EA%B7%B8%EB%9E%98%ED%94%84%EB%A1%9C-%EA%B7%B8%EB%A6%AC%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#하나의-그래프로-그리기"
  },"34": {
    "doc": "둘 이상의 속성 시각화",
    "title": "속성별 화면 분할하기",
    "content": "하나의 그래프에 모든 정보를 담는 대신, 각 속성을 별도의 화면으로 분할하여 시각화할 수도 있습니다. facet_wrap을 사용해 속성별로 화면을 나눕니다. | vars(구분): 속성(구분)을 기준으로 분할 | nrow=2: 2줄로 화면 배열 | . ggplot(data = data2, aes(x = 종류, y = 값, group = 종류, fill = 종류)) + geom_col(width = 0.6) + geom_text(aes(label = scales::comma(값, accuracy = .1)), vjust = -0.5) + scale_x_discrete(name = \"\") + scale_y_continuous(name = \"\", expand = expansion(mult = c(0, 0.2))) + facet_wrap(vars(구분), nrow = 2) + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#%EC%86%8D%EC%84%B1%EB%B3%84-%ED%99%94%EB%A9%B4-%EB%B6%84%ED%95%A0%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#속성별-화면-분할하기"
  },"35": {
    "doc": "둘 이상의 속성 시각화",
    "title": "x축 순서 정렬하기",
    "content": "앞서 작성한 그래프에서 x축이 붓꽃 종류(setosa, versicolor, virginica)로 고정되어 있습니다. 속성별 값에 따라 막대를 오름차순으로 정렬하려면 tidytext 패키지의 reorder_within과 scale_x_reordered를 사용하면 됩니다. # 패키지 로드 library(tidytext) # 속성 내 값 기준 오름차순 정렬 ggplot(data = data2, aes(x = reorder_within(종류, 값, 구분), y = 값, group = 종류, fill = 종류)) + geom_col(width = 0.6) + geom_text(aes(label = scales::comma(값, accuracy = .1)), vjust = -0.5) + scale_x_reordered(name = \"\") + scale_y_continuous(name = \"\", expand = expansion(mult = c(0, 0.2))) + facet_wrap(vars(구분), nrow = 2, scales = \"free_x\") + theme_bw() . 이번에는 여러 속성을 효과적으로 보여주는 방식을 소개했습니다. 화면 분할, 정렬 등을 조합하여 복잡한 데이터를 직관적으로 표현할 수 있습니다. 위 코드를 참고하여 여러분 데이터에 맞는 시각화를 시도해 보세요! . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#x%EC%B6%95-%EC%88%9C%EC%84%9C-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%91%98%20%EC%9D%B4%EC%83%81%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%8B%9C%EA%B0%81%ED%99%94.html#x축-순서-정렬하기"
  },"36": {
    "doc": "막대그래프 오름차순 정렬",
    "title": "막대그래프 오름차순 정렬",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html"
  },"37": {
    "doc": "막대그래프 오름차순 정렬",
    "title": "데이터 준비",
    "content": "막대그래프의 기본 정렬 순서를 이해하고, 데이터 값에 따라 정렬하는 방법을 알아보겠습니다. 이번 예제에서는 iris 데이터셋을 사용하여 붓꽃 종류별 평균 꽃받침 너비를 나타내는 그래프를 작성하겠습니다. 기본적으로는 종류가 알파벳 순으로 정렬됩니다. # 패키지 로드 library(ggplot2) library(dplyr) # 데이터 준비 data &lt;- iris %&gt;% group_by(Species) %&gt;% summarise(`꽃받침 너비` = mean(Sepal.Width)) %&gt;% rename(종류 = Species) # 기본 그래프 ggplot(data, aes(x = 종류, y = `꽃받침 너비`, label = round(`꽃받침 너비`, 2))) + geom_col(width = 0.6, fill = \"#56B4E9\") + geom_text(vjust = -0.5) + scale_y_continuous(expand = expansion(mult = c(0, 0.1))) + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html#데이터-준비"
  },"38": {
    "doc": "막대그래프 오름차순 정렬",
    "title": "막대그래프를 값에 따라 정렬하기",
    "content": "꽃받침 너비를 기준으로 막대그래프를 정렬하려면, reorder를 사용하면 됩니다. 1. 내림차순 정렬 . 값이 큰 순서대로 정렬하려면 reorder(종류, -`꽃받침 너비`)를 사용합니다. ggplot(data, aes(x = reorder(종류, -`꽃받침 너비`), y = `꽃받침 너비`, label = round(`꽃받침 너비`, 2))) + geom_col(width = 0.6, fill = \"#56B4E9\") + geom_text(vjust = -0.5) + scale_y_continuous(expand = expansion(mult = c(0, 0.1))) + theme_bw() . 2. 오름차순 정렬 . 값이 작은 순서대로 정렬하려면 reorder(종류,`꽃받침 너비`)를 사용합니다. ggplot(data, aes(x = reorder(종류, `꽃받침 너비`), y = `꽃받침 너비`, label = round(`꽃받침 너비`, 2))) + geom_col(width = 0.6, fill = \"#56B4E9\") + geom_text(vjust = -0.5) + scale_y_continuous(expand = expansion(mult = c(0, 0.1))) + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html#%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%EB%A5%BC-%EA%B0%92%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html#막대그래프를-값에-따라-정렬하기"
  },"39": {
    "doc": "막대그래프 오름차순 정렬",
    "title": "x축 제목 수정",
    "content": "reorder를 사용하면 x축 제목이 ’reorder(종류, -\\꽃받침 너비\\\\)’로 표시됩니다. scale_x_discrete를 사용하여 제목을 수정할 수 있습니다. ggplot(data, aes(x = reorder(종류, -`꽃받침 너비`), y = `꽃받침 너비`, label = round(`꽃받침 너비`, 2))) + geom_col(width = 0.6, fill = \"#56B4E9\") + geom_text(vjust = -0.5) + scale_x_discrete(name = \"붓꽃 종류\") + scale_y_continuous(expand = expansion(mult = c(0, 0.1))) + theme_bw() . reorder를 활용하면 막대그래프를 데이터 값에 따라 쉽게 정렬할 수 있습니다. 이를 통해 시각화를 더욱 직관적으로 만들 수 있습니다. 각 사례를 참고하여 데이터에 맞는 정렬 방식을 적용해 보세요! . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html#x%EC%B6%95-%EC%A0%9C%EB%AA%A9-%EC%88%98%EC%A0%95",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EB%A7%89%EB%8C%80%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%20%EC%A0%95%EB%A0%AC.html#x축-제목-수정"
  },"40": {
    "doc": "숫자 포맷팅",
    "title": "숫자 포맷팅",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html"
  },"41": {
    "doc": "숫자 포맷팅",
    "title": "데이터 준비",
    "content": "숫자 데이터를 효과적으로 시각화하기 위해 콤마 표기, 백분율 변환, 소수점 조정 등 다양한 포맷팅 기법을 활용할 수 있습니다. 이번 포스팅에서는 항공 승객 데이터를 사용해 포맷팅 주요 팁을 정리하였습니다. AirPassengers 데이터를 데이터프레임으로 변환하여 연도별 승객 수를 계산합니다. 이후, 전년 대비 승객 수 증감률을 추가합니다. # 패키지 로드 library(tidyverse) # 데이터 준비 data &lt;- data.frame(matrix(AirPassengers, ncol = 12, byrow = TRUE)) colnames(data) &lt;- seq(1, 12) data &lt;- data %&gt;% mutate(년도 = seq(1949, 1960)) data2 &lt;- data %&gt;% mutate( `승객 수` = rowSums(across(1:12)), `전년 대비 승객 수 증감률` = (`승객 수` - lag(`승객 수`)) / lag(`승객 수`) ) %&gt;% select(년도, `승객 수`, `전년 대비 승객 수 증감률`) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#데이터-준비"
  },"42": {
    "doc": "숫자 포맷팅",
    "title": "콤마 표기하기",
    "content": "세 자리마다 콤마를 추가하려면 scales 패키지의 comma 함수를 활용하면 됩니다. # 패키지 로드 library(scales) # 그래프 작성 ggplot(data = data2, aes(x = 년도, y = `승객 수`, label = comma(`승객 수`)) ) + geom_col(width = 0.6) + geom_text(vjust = -1) + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#%EC%BD%A4%EB%A7%88-%ED%91%9C%EA%B8%B0%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#콤마-표기하기"
  },"43": {
    "doc": "숫자 포맷팅",
    "title": "백분율 표기 및 소수점 조정하기",
    "content": "전년 대비 승객 수 증감률을 백분율로 변환하고, 소수점 한 자리까지만 표시합니다. ggplot(data = data2, aes(x = 년도, y = `전년 대비 승객 수 증감률`, label = percent(`전년 대비 승객 수 증감률`, accuracy = 0.1)) ) + geom_line(size = 1) + geom_text(vjust = -1) + theme_bw() . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#%EB%B0%B1%EB%B6%84%EC%9C%A8-%ED%91%9C%EA%B8%B0-%EB%B0%8F-%EC%86%8C%EC%88%98%EC%A0%90-%EC%A1%B0%EC%A0%95%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#백분율-표기-및-소수점-조정하기"
  },"44": {
    "doc": "숫자 포맷팅",
    "title": "그래프 완성하기",
    "content": "위에서 소개한 내용을 모두 적용한 그래프를 작성합니다. 추가적으로 선 그래프 위에 점을 추가하고, 그래프의 미적 요소를 개선합니다. # 패키지 로드 library(showtext) # 글꼴 설정 font_add_google(\"Noto Sans KR\", \"noto\") showtext_auto() showtext_opts(dpi = 300) theme.size = 10 geom.text.size = theme.size/.pt # 혼합형 그래프 작성을 위한 상수 계산 coeff &lt;- data2[2, \"승객 수\"] / data2[2, \"전년 대비 승객 수 증감률\"] * 0.8 # 그래프 작성 ggplot(data = data2, aes(x = 년도)) + geom_col(aes(y = `승객 수`, fill = \"승객 수\"), width = 0.6) + geom_text(aes(y = `승객 수`, label = comma(`승객 수`)), vjust = -1, family = \"noto\", size = 3) + geom_line(aes(y = `전년 대비 승객 수 증감률` * coeff, color = \"전년 대비 승객 수 증감률\"), size = 1) + geom_point(aes(y = `전년 대비 승객 수 증감률` * coeff, color = \"전년 대비 승객 수 증감률\"), size = 2) + geom_text(aes(y = `전년 대비 승객 수 증감률` * coeff, label = percent(`전년 대비 승객 수 증감률`, accuracy = 0.1, suffix = \"\")), vjust = -1, family = \"noto\", size = 3) + scale_fill_manual(values = \"#9AD1F5\") + scale_color_manual(values = \"#e25a6c\") + scale_x_continuous(n.breaks = 12) + scale_y_continuous( name = \"승객 수(천 명)\", labels = comma_format(), expand = expansion(mult = c(0, 0.1)), sec.axis = sec_axis(~./coeff, name = \"전년 대비 승객 수 증감률(%)\", labels = percent_format(suffix = \"\")) ) + theme_bw(base_family = \"noto\") + theme( panel.grid = element_blank(), legend.title = element_blank(), legend.background=element_blank(), legend.key.size=unit(geom.text.size, \"mm\"), legend.text=element_text(size=rel(1)), legend.position=c(0.20, 0.90), legend.margin=margin(0, 0, 0, 0) ) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#%EA%B7%B8%EB%9E%98%ED%94%84-%EC%99%84%EC%84%B1%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%88%AB%EC%9E%90%20%ED%8F%AC%EB%A7%B7%ED%8C%85.html#그래프-완성하기"
  },"45": {
    "doc": "정규표현식을 활용한 문자열 처리",
    "title": "정규표현식을 활용한 문자열 처리",
    "content": " ",
    "url": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%EC%B2%98%EB%A6%AC.html",
    
    "relUrl": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%EC%B2%98%EB%A6%AC.html"
  },"46": {
    "doc": "정규표현식을 활용한 문자열 처리",
    "title": "정규표현식의 주요 구성 요소",
    "content": "정규표현식(Regular Expression or Regex)은 특정 패턴의 문자열을 찾거나 변경할 때 사용하는 강력한 도구입니다. 이번 포스팅에서는 정규표현식의 주요 구성 요소와 R에서의 활용법을 간결하고 명확하게 정리해보겠습니다. 문자 클래스(Character Class) . 문자 클래스는 특정 문자 집합을 나타낼 때 사용됩니다. 대괄호([]) 안에 문자를 나열하여 문자 집합을 나타낼 수 있습니다. 대괄호에 나열된 문자 중 한 문자와 일치하는지 확인할 때 사용됩니다. | 0부터 9까지 숫자 중 한 문자: [0123456789] | a부터 z까지 소문자 중 한 문자: [abcdefghijklmnopqrstuvwxyz] | 영어 소문자 모음 중 한 문자: [aeiou] | . 순서가 있는 문자의 경우, 범위를 나타내는 - 기호로 축약하여 나타낼 수 있습니다. 기호 그 자체인 -를 표현하고 싶다면, 대괄호 안에서 문자들 사이가 아닌 처음이나 마지막 위치에 -를 작성하면 됩니다. | 0부터 9까지 숫자 중 한 문자: [0-9] | a부터 z까지 소문자 중 한 문자: [a-z] | 알파벳 중 한 문자: [a-zA-Z] | 한글 중 한 문자: [가-힣] | . 대괄호 안 가장 처음에 ^ 기호로 부정을 표현할 수 있습니다. | 숫자가 아닌 한 문자: [^0-9] | 숫자, 알파벳, 한글이 아닌 한 문자: [^0-9a-zA-Z] | . 메타문자(Metacharacter) . 문자 클래스로 표기할 경우 길이가 길어지는 경우 메타문자를 사용하기도 합니다. 일반적으로, ‘백슬래쉬 + 알파벳’ 형태로 생겼습니다. ‘백슬래쉬 + 대문자’는 ’백슬래쉬 + 소문자’의 반대 의미로 쓰이므로, ’백슬래쉬 + 소문자’ 의미만 알고 있으면 됩니다. | 메타문자 | 의미 | 문자 클래스로 표현할 경우 | . | . | 줄바꿈 문자(\\n)를 제외한 모든 문자 | [^\\n] | . | \\d | 숫자(0-9) | [0-9] | . | \\D | 숫자가 아닌 문자 | [^0-9] | . | \\w | 단어 문자(word character), 유니코드에서 글자(letters), 숫자(digits), 언더스코어(underscore)를 의미함 | [a-zA-Z가-힣0-9_] | . | \\W | 단어 문자가 아닌 문자 | [^a-zA-Z가-힣0-9_] | . | \\s | 공백 문자(white space), 스페이스 바(``), 줄바꿈(\\n), 수평탭 간격 띄우기(\\t), 수직탭 간격 띄우기(\\v), 프린트 출력 용지 한 페이지 넘김(\\f), 동일한 줄 맨 앞으로 커서 이동(\\r) 등을 의미함 | [\\n\\t\\v\\f\\r ] | . | \\S | 공백 문자가 아닌 문자 | [^\\n\\t\\v\\f\\r ] | . 수량자(Quantifier) . 수량자는 특정 문자의 반복 횟수를 지정하는 데 쓰입니다. 다만, 문자 클래스 안에 수량자를 적으면 문자의 반복 정도가 아니라 기호 그 자체를 나타낸다는 점을 주의해 주세요. | 수량자 | 의미 | . | ? | 0 또는 1회만 반복 | . | + | 1회 이상 반복 | . | * | 0회 이상 반복 | . | {n} | n회 반복 | . | {n,} | n회 이상 반복 | . | {n, m} | n~m회 반복 | . 앵커(Anchor) . 앵커는 문자의 특정 위치를 나타내는 기호입니다. 앵커를 사용하면, 문자열의 시작이나 끝과 매칭되는 패턴을 정의할 수 있습니다. | 앵커 | 의미 | . | ^ | 행의 처음(문자 클래스 안에서 부정을 나타내는 ^와 다른 의미) | . | $ | 행의 끝 | . | \\A | 텍스트 처음 | . | \\Z | 텍스트 끝 | . | \\b | 단어 경계 | . 그룹(Group) . 그룹은 ()로 표현하며, 여러 문자를 하나의 단위로 묶는 데 사용됩니다. 연산의 우선순위를 지정하거나 역참조하기 위한 참조 그룹을 정의할 때 쓰입니다. 전후방탐색(Look around) . 전후방탐색에서 괄호 안의 문자는 소비되지 않습니다. 즉, 괄호 앞이나 뒤에 있는 문자만 탐색합니다. ‘전방탐색’은 괄호 앞의 문자를 탐색하고, ’후방탐색’은 괄호 뒤의 문자를 탐색합니다. 괄호 안의 문자가 있어야 하는 조건이면 ’긍정형’, 없어야 하는 조건이면 ’부정형’이라고 합니다. 기호가 헷갈릴 수 있는데, 기본 기호는 (?)이고, 긍정형/부정형, 전방탐색/후방탐색에 따라 기호가 추가됩니다. 긍정형은 =, 부정형은 ! 기호가 사용되고, 후방탐색의 경우 ?와 =/! 사이에 &lt; 기호가 추가됩니다. | 전후방탐색 | 의미 | . | a(?=b) | 긍정형 전방탐색: a 다음 b가 나오는 a | . | a(?!b) | 부정형 전방탐색: a 다음 b가 나오지 않는 a | . | (?&lt;=b)a | 긍정형 후방탐색: b 다음 a가 나오는 a | . | (?&lt;!b)a | 부정형 후방탐색: b 다음 a가 나오지 않는 a | . 백슬래쉬 주의사항 . 정규표현식에서는 괄호((, )), 중괄호({, }), 대괄호([, ]), 마침표(.), 별표(*), 덧셈기호(+), 백슬래쉬(\\) 등이 특별한 의미로 사용됩니다. 특별한 의미로 사용되는 문자를 문자 그 자체를 의미하는 기호로 나타내기 위해서는 앞에 백슬래쉬(\\)를 붙여줘야 합니다. 그런데 \\\\(, \\\\{, \\\\.처럼 R에서는 백슬래쉬를 두 번 작성해야 합니다. ",
    "url": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%EC%B2%98%EB%A6%AC.html#%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%98-%EC%A3%BC%EC%9A%94-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C",
    
    "relUrl": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%EC%B2%98%EB%A6%AC.html#정규표현식의-주요-구성-요소"
  },"47": {
    "doc": "정규표현식을 활용한 문자열 처리",
    "title": "R에서의 정규표현식 활용",
    "content": "stringr 패키지 . R에서 제공하는 기본 함수도 있지만 stringr 패키지를 사용하면 더 쉽게 문자열을 처리할 수 있습니다. stringr 패키지는 tidyverse에도 포함되어 있어서 tidyverse만 설치해도 됩니다. stringr 패키지가 제공하는 함수에 정규표현식을 입력하여 문자열을 처리할 수 있습니다. 패턴 일치 여부, 패턴 위치, 패턴 일치 수, 패턴과 일치하는 문자열 일부 추출, 패턴을 포함하는 문자열 추출 등 다양한 작업이 가능합니다. 자세한 내용은 아래 커닝 페이퍼(Cheat sheet)을 참고해 주세요. | String manipulation with stringr::CHEAT SHEET | . 경험 상 아래 5개 함수를 주로 사용하게 되는 것 같습니다. 패턴과 일치하는 문자열이 있는지 ’확인(detect)’하거나, 패턴과 일치하는 문자열을 ’추출(extract)’하거나, 다른 문자열로 ’대체(replace)’하는 함수가 활용도가 높습니다. 함수에서 pattern 인자에 문자열 패턴을 정규표현식으로 작성해 주면 됩니다. | 함수 | 설명 | . | str_detect(string, pattern) | 각 문자열에서 패턴과 일치하는 문자열이 있는지를 탐색함 | . | str_extract(string, pattern) | 각 문자열에서 패턴과 첫 번째로 일치하는 문자열을 추출함 | . | str_extract_all(string, pattern) | 각 문자열에서 패턴과 일치하는 모든 문자열을 추출함 | . | str_replace(string, pattern, replacement) | 각 문자열에서 패턴과 첫 번째로 일치하는 문자열을 다른 문자열로 바꿈 | . | str_replace_all(string, pattern, replacement) | 각 문자열에서 패턴과 일치하는 모든 문자열을 다른 문자열로 바꿈 | . 문자열 유무 감지 . str_detect() 함수는 문자열에서 특정 패턴이 존재하는지 여부를 불리언(Boolean) 값으로 변환하는 함수입니다. # 예시 문자 text &lt;- c(\"1991년\", \"2000년\", \"2010년\", \"2012년\") # \"2000년\" 이후에 해당하는지 확인 str_detect(text, \"^20\") . ## [1] FALSE TRUE TRUE TRUE . 문자열 추출 . str_extract() 함수는 문자열에서 특정 패턴과 첫 번째로 일치하는 문자열을 추출하는 데 사용됩니다. # 예시 문자 text &lt;- c(\"이메일 주소는 alice@example.com입니다.\", \"john.doe@gmail.com도 사용 중이에요.\", \"다양한 주소들: support@company.com, info@website.or.kr\") # 이메일주소 추출 str_extract(text, \"[a-zA-Z_.]+@\\\\w+\\\\.[a-zA-Z]+\") . ## [1] \"alice@example.com\" \"john.doe@gmail.com\" \"support@company.com\" . 문자열 대체 . str_replace() 함수는 문자열에서 특정 패턴과 첫 번째로 일치하는 문자열을 다른 문자열로 대체하는 데 사용됩니다. # 예시 문자 text &lt;- c(\"I have an apple.\", \"She brought apples.\", \"The apple tree is tall.\") # apple을 orange로 대체 str_replace(text, \"apple\", \"orange\") . ## [1] \"I have an orange.\" \"She brought oranges.\" ## [3] \"The orange tree is tall.\" . 이와 같이 정규표현식을 사용하면 복잡한 문자열 처리를 간단하게 수행할 수 있습니다. stringr 패키지와 함께 정규표현식을 활용해 다양한 작업을 시도해 보세요! . ",
    "url": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%EC%B2%98%EB%A6%AC.html#r%EC%97%90%EC%84%9C%EC%9D%98-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D-%ED%99%9C%EC%9A%A9",
    
    "relUrl": "/docs/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EA%B3%B5%20%ED%8C%81/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%EC%B2%98%EB%A6%AC.html#r에서의-정규표현식-활용"
  },"48": {
    "doc": "지도 팁",
    "title": "지도 팁",
    "content": "공간 데이터를 시각화하고 분석하는 데 유용한 R 팁과 기술을 다룹니다. sf와 ggplot2를 활용해 지도를 만들고, 공간 데이터를 시각화하며, 지역 정보를 효과적으로 표현하는 방법을 정리합니다. ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81",
    
    "relUrl": "/docs/지도 팁"
  },"49": {
    "doc": "차트 팁",
    "title": "차트 팁",
    "content": "데이터를 한눈에 이해할 수 있는 시각화를 위한 R 그래프 작성 팁을 공유합니다. ggplot2를 활용해 다양한 유형의 차트를 만들어 인사이트를 효과적으로 전달하는 방법을 정리합니다. ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81",
    
    "relUrl": "/docs/차트 팁"
  },"50": {
    "doc": "축 텍스트 줄 바꿈",
    "title": "축 텍스트 줄 바꿈",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%B6%95%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A4%84%20%EB%B0%94%EA%BF%88.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%B6%95%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A4%84%20%EB%B0%94%EA%BF%88.html"
  },"51": {
    "doc": "축 텍스트 줄 바꿈",
    "title": "일정 너비 초과 시 줄 바꾸기",
    "content": "ggplot2로 그래프를 그릴 때 축 텍스트가 길어 중첩되거나 잘리는 경우, 줄 바꿈을 통해 가독성을 높일 수 있습니다. 이번 포스팅에서는 축 텍스트 줄 바꿈을 간단히 설정하는 두 가지 방법을 소개합니다. 첫 번째 방법은 stringr 패키지의 str_wrap 함수를 사용하여 일정 너비를 초과하는 텍스트를 자동으로 줄 바꾸는 것입니다. 이 방법은 간단히 텍스트의 최대 너비를 지정할 수 있어 편리합니다. str_wrap 함수는 텍스트를 지정된 width 값에 따라 줄 바꿈합니다. # 패키지 설치 및 로드 install.packages(\"stringr\") library(stringr) # 축 텍스트 너비 설정 scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%B6%95%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A4%84%20%EB%B0%94%EA%BF%88.html#%EC%9D%BC%EC%A0%95-%EB%84%88%EB%B9%84-%EC%B4%88%EA%B3%BC-%EC%8B%9C-%EC%A4%84-%EB%B0%94%EA%BE%B8%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%B6%95%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A4%84%20%EB%B0%94%EA%BF%88.html#일정-너비-초과-시-줄-바꾸기"
  },"52": {
    "doc": "축 텍스트 줄 바꿈",
    "title": "특정 문자 기준으로 줄 바꾸기",
    "content": "두 번째 방법은 sub 함수와 정규표현식을 사용하여 특정 문자(괄호, 대쉬, 쉼표 등)를 기준으로 줄 바꿈하는 것입니다. 이 방법은 특정 위치에서 줄 바꿈을 제어하고 싶을 때 유용합니다. 정규표현식에서 각 기호가 의미하는 바는 다음과 같습니다. | \\\\(: 괄호 | \\n: 줄 바꿈 문자 | \\\\s: 공백 문자 | . # 괄호 앞 줄 바꿈 scale_x_discrete(labels=function(x) sub(\"\\\\(\", \"\\n\\\\(\", x)) # 대쉬 뒤 줄 바꿈 scale_x_discrete(labels=function(x) sub(\"-\", \"-\\n\", x)) # 대쉬 뒤 줄 바꿈 후 공백 줄 바꿈 scale_x_discrete(labels = function(x){ y=sub(\"-\", \"-\\n\", x) sub(\"\\\\s\", \"\\n\", y) }) . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%B6%95%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A4%84%20%EB%B0%94%EA%BF%88.html#%ED%8A%B9%EC%A0%95-%EB%AC%B8%EC%9E%90-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EC%A4%84-%EB%B0%94%EA%BE%B8%EA%B8%B0",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%EC%B6%95%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A4%84%20%EB%B0%94%EA%BF%88.html#특정-문자-기준으로-줄-바꾸기"
  },"53": {
    "doc": "행정구 병합하기",
    "title": "행정구 병합하기",
    "content": " ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html"
  },"54": {
    "doc": "행정구 병합하기",
    "title": "개요",
    "content": "시군구 단위의 지도를 그릴 때 자치구와 행정구를 모두 포함할지 고민되는 경우가 있습니다. 경기도 수원시나 성남시처럼 행정구가 설치된 경우, 이를 병합해서 시로만 표현하는 경우가 많습니다. 이번 글에서는 행정구 경계를 병합하는 방법을 단계별로 살펴보겠습니다. ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#%EA%B0%9C%EC%9A%94",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#개요"
  },"55": {
    "doc": "행정구 병합하기",
    "title": "행정구역 경계 데이터 다운로드하기",
    "content": "우선, 지도의 기초 데이터를 준비해야 합니다. V-World 디지털트윈국토 사이트에서 필요한 공간정보 데이터를 다운받을 수 있습니다. 로그인 후 ’행정구역’을 검색해 행정구역시군구_경계 게시물에서 시군구 경계 데이터를 받을 수 있습니다. 이번에는 수도권(서울, 인천, 경기)의 데이터를 다운로드하여 사용합니다. ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#%ED%96%89%EC%A0%95%EA%B5%AC%EC%97%AD-%EA%B2%BD%EA%B3%84-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#행정구역-경계-데이터-다운로드하기"
  },"56": {
    "doc": "행정구 병합하기",
    "title": "shp 파일 읽기 및 병합하기",
    "content": "파일을 처리하기 위해 tidyverse와 sf 패키지를 사용합니다. list.files 함수로 폴더 내 모든 shp 파일을 찾고, 이를 st_read 함수로 읽어 데이터프레임 형식으로 변환합니다. 이후 bind_rows를 통해 읽어들인 여러 데이터를 하나로 합칩니다. 이 과정을 통해 수도권에 해당하는 행정구역 데이터를 통합한 데이터셋을 얻을 수 있습니다. # 패키지 로드 library(tidyverse) library(sf) # 데이터 불러오기 folder_path &lt;- \"데이터/수도권 지도/행정구역 경계\" shp_files &lt;- list.files(folder_path, pattern = \"*.shp$\", full.names = TRUE) merged_shp &lt;- shp_files %&gt;% lapply(st_read) %&gt;% bind_rows() . ## Reading layer `LARD_ADM_SECT_SGG_11_202405' from data source ## `C:\\...\\데이터\\수도권 지도\\행정구역 경계\\LARD_ADM_SECT_SGG_11_202405.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 25 features and 4 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 179191.4 ymin: 536562.8 xmax: 216242.3 ymax: 566863.5 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## Reading layer `LARD_ADM_SECT_SGG_28_202405' from data source ## `C:\\...\\데이터\\수도권 지도\\행정구역 경계\\LARD_ADM_SECT_SGG_28_202405.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 10 features and 4 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -10044.95 ymin: 481583 xmax: 181782.2 ymax: 600780 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## Reading layer `LARD_ADM_SECT_SGG_41_202405' from data source ## `C:\\...\\데이터\\수도권 지도\\행정구역 경계\\LARD_ADM_SECT_SGG_41_202405.shp' ## using driver `ESRI Shapefile' ## Simple feature collection with 44 features and 4 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 144789.2 ymin: 477264 xmax: 274945.2 ymax: 631207.8 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 . # 데이터 확인 head(merged_shp) . ## Simple feature collection with 6 features and 4 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 195102.6 ymin: 545229.7 xmax: 210189.8 ymax: 559196.5 ## Projected CRS: Korea_2000_Korea_Central_Belt_2010 ## ADM_SECT_C SGG_NM SGG_OID COL_ADM_SE ## 1 11110 서울특별시 종로구 11 11110 ## 2 11140 서울특별시 중구 34 11140 ## 3 11170 서울특별시 용산구 1 11170 ## 4 11200 서울특별시 성동구 1 11200 ## 5 11215 서울특별시 광진구 49 11215 ## 6 11230 서울특별시 동대문구 232 11230 ## geometry ## 1 MULTIPOLYGON (((197800 5590... ## 2 MULTIPOLYGON (((202072.4 55... ## 3 MULTIPOLYGON (((197569.6 55... ## 4 MULTIPOLYGON (((203845.4 55... ## 5 MULTIPOLYGON (((208984.4 55... ## 6 MULTIPOLYGON (((206279 5563... ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#shp-%ED%8C%8C%EC%9D%BC-%EC%9D%BD%EA%B8%B0-%EB%B0%8F-%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#shp-파일-읽기-및-병합하기"
  },"57": {
    "doc": "행정구 병합하기",
    "title": "행정구 경계 병합하기",
    "content": "str_replace 함수를 사용해 SGG_NM 열에 있는 ’경기도 수원시 장안구’와 같은 값을 ’경기도 수원시’로 변환하고, 이후 group_by와 summarise를 통해 동일한 이름을 가진 행정구역을 병합합니다. 이 과정을 통해 행정구를 시 단위로 통합할 수 있습니다. str_replace(SGG_NM, \"(\\\\s\\\\w+)\\\\s\\\\w+$\", \"\\\\1\")는 문자열에서 특정 패턴을 찾아 변환하는 함수입니다. 이 코드는 SGG_NM 열에 있는 행정구역 이름에서 두 번째 공백 뒤의 단어를 제거하고, 앞부분만 남깁니다. 예를 들어 ’경기도 수원시 장안구’라는 값이 ’경기도 수원시’로 변환됩니다. 여기서 정규표현식 \"(\\\\s\\\\w+)\\\\s\\\\w+$\"는 문자열에서 첫 번째 공백과 그 뒤의 단어를 하나의 그룹으로 캡처(\\\\1)하겠다는 의미를 나타냅니다. # 패키지 로드 library(stringr) # 행정구역 명칭의 두 번째 공백 뒤 단어를 없애기 result &lt;- merged_shp %&gt;% mutate(SGG_NM = str_replace(SGG_NM, \"(\\\\s\\\\w+)\\\\s\\\\w+$\", \"\\\\1\")) %&gt;% group_by(SGG_NM, COL_ADM_SE) %&gt;% summarise() # 행정구역 확인 unique(result$SGG_NM) . ## [1] \"경기도 가평군\" \"경기도 고양시\" \"경기도 과천시\" ## [4] \"경기도 광명시\" \"경기도 광주시\" \"경기도 구리시\" ## [7] \"경기도 군포시\" \"경기도 김포시\" \"경기도 남양주시\" ## [10] \"경기도 동두천시\" \"경기도 부천시\" \"경기도 성남시\" ## [13] \"경기도 수원시\" \"경기도 시흥시\" \"경기도 안산시\" ## [16] \"경기도 안성시\" \"경기도 안양시\" \"경기도 양주시\" ## [19] \"경기도 양평군\" \"경기도 여주시\" \"경기도 연천군\" ## [22] \"경기도 오산시\" \"경기도 용인시\" \"경기도 의왕시\" ## [25] \"경기도 의정부시\" \"경기도 이천시\" \"경기도 파주시\" ## [28] \"경기도 평택시\" \"경기도 포천시\" \"경기도 하남시\" ## [31] \"경기도 화성시\" \"서울특별시 강남구\" \"서울특별시 강동구\" ## [34] \"서울특별시 강북구\" \"서울특별시 강서구\" \"서울특별시 관악구\" ## [37] \"서울특별시 광진구\" \"서울특별시 구로구\" \"서울특별시 금천구\" ## [40] \"서울특별시 노원구\" \"서울특별시 도봉구\" \"서울특별시 동대문구\" ## [43] \"서울특별시 동작구\" \"서울특별시 마포구\" \"서울특별시 서대문구\" ## [46] \"서울특별시 서초구\" \"서울특별시 성동구\" \"서울특별시 성북구\" ## [49] \"서울특별시 송파구\" \"서울특별시 양천구\" \"서울특별시 영등포구\" ## [52] \"서울특별시 용산구\" \"서울특별시 은평구\" \"서울특별시 종로구\" ## [55] \"서울특별시 중구\" \"서울특별시 중랑구\" \"인천광역시 강화군\" ## [58] \"인천광역시 계양구\" \"인천광역시 남동구\" \"인천광역시 동구\" ## [61] \"인천광역시 미추홀구\" \"인천광역시 부평구\" \"인천광역시 서구\" ## [64] \"인천광역시 연수구\" \"인천광역시 옹진군\" \"인천광역시 중구\" . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#%ED%96%89%EC%A0%95%EA%B5%AC-%EA%B2%BD%EA%B3%84-%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#행정구-경계-병합하기"
  },"58": {
    "doc": "행정구 병합하기",
    "title": "시도 경계 만들기",
    "content": "시군구 데이터를 시도 단위로 더 단순화하기 위해 SGG_NM에서 첫 번째 단어를 추출하여 SIDO_NM 열을 생성합니다. 마찬가지로, str_replace를 사용하며, ’경기도 수원시’에서 ’경기도’만 남도록 변환합니다. 이후 group_by와 summarise로 데이터를 병합하여 시도 단위의 데이터를 생성합니다. # 시도 칼럼 생성 및 병합 result_sido &lt;- result %&gt;% mutate(SIDO_NM = str_replace(SGG_NM, \"(\\\\w+)\\\\s\\\\w+\", \"\\\\1\")) %&gt;% group_by(SIDO_NM) %&gt;% summarise() # 행정구역 확인 unique(result_sido$SIDO_NM) . ## [1] \"경기도\" \"서울특별시\" \"인천광역시\" . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#%EC%8B%9C%EB%8F%84-%EA%B2%BD%EA%B3%84-%EB%A7%8C%EB%93%A4%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#시도-경계-만들기"
  },"59": {
    "doc": "행정구 병합하기",
    "title": "수도권 시군구 지도 작성하기",
    "content": "가공한 데이터를 지도에 나타내기 위해 ggplot2 패키지를 사용합니다. geom_sf 함수는 공간 데이터를 시각화할 수 있도록 지원하는 함수입니다. 경계선 색상과 두께를 설정해 시군구와 시도의 경계를 각각 다른 레이어로 표현할 수 있습니다. theme_void를 사용해 축과 배경을 제거하여 깔끔한 지도를 만듭니다. # 패키지 로드 library(ggplot2) # 지도 작성 ggplot() + geom_sf(data = result, colour = \"gray40\", fill = NA, size = 0.5) + geom_sf(data = result_sido, colour = \"gray20\", fill = NA, size = 1.3) + theme_void() . ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#%EC%88%98%EB%8F%84%EA%B6%8C-%EC%8B%9C%EA%B5%B0%EA%B5%AC-%EC%A7%80%EB%8F%84-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#수도권-시군구-지도-작성하기"
  },"60": {
    "doc": "행정구 병합하기",
    "title": "shp 파일 저장하기",
    "content": "가공한 데이터를 shp 파일로 저장해 이후에 활용할 수 있습니다. st_write 함수를 사용해 저장할 수 있습니다. UTF-8 인코딩을 설정해 한글 데이터가 깨지지 않도록 하고, append = FALSE로 지정해 기존 파일에 덮어쓰기할 수 있도록 설정합니다. st_write(result, \"아웃풋/수도권 행정구 병합 지도.shp\", append=FALSE, layer_options = \"ENCODING=UTF-8\") . ## Deleting layer `수도권 행정구 병합 지도' using driver `ESRI Shapefile' ## Writing layer `수도권 행정구 병합 지도' to data source ## `아웃풋/수도권 행정구 병합 지도.shp' using driver `ESRI Shapefile' ## options: ENCODING=UTF-8 ## Writing 66 features with 2 fields and geometry type Unknown (any). ",
    "url": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#shp-%ED%8C%8C%EC%9D%BC-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0",
    
    "relUrl": "/docs/%EC%A7%80%EB%8F%84%20%ED%8C%81/%ED%96%89%EC%A0%95%EA%B5%AC%20%EB%B3%91%ED%95%A9%ED%95%98%EA%B8%B0.html#shp-파일-저장하기"
  },"61": {
    "doc": "혼합형 그래프 작성",
    "title": "혼합형 그래프 작성",
    "content": " ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%ED%98%BC%ED%95%A9%ED%98%95%20%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%9E%91%EC%84%B1.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%ED%98%BC%ED%95%A9%ED%98%95%20%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%9E%91%EC%84%B1.html"
  },"62": {
    "doc": "혼합형 그래프 작성",
    "title": "데이터 준비",
    "content": "막대그래프와 선그래프를 조합한 혼합형 그래프를 그려야 할 때가 있습니다. 이번 포스팅에서는 AirPassengers 데이터를 활용하여 혼합형 그래프를 작성하는 과정을 단계별로 소개해 드립니다. AirPassengers 데이터셋은 1949~1960년 월별 항공 승객 수를 제공하며, 단위는 천 명입니다. 이를 ggplot2로 시각화하기 위해 먼저 데이터를 변환해야 합니다. AirPassengers는 시계열 객체(ts)로, 그래프 작성을 위해 데이터프레임 객체로 변환해야 합니다. 데이터셋을 변환하고 필요한 열을 추가합니다. # 패키지 로드 library(dplyr) # 데이터 변환 data &lt;- data.frame(matrix(AirPassengers, ncol = 12, byrow = TRUE)) colnames(data) &lt;- seq(1, 12) # 열 이름 변경 (1~12월) data &lt;- data %&gt;% mutate(년도 = seq(1949, 1960)) # 데이터 확인 head(data) . ## 1 2 3 4 5 6 7 8 9 10 11 12 년도 ## 1 112 118 132 129 121 135 148 148 136 119 104 118 1949 ## 2 115 126 141 135 125 149 170 170 158 133 114 140 1950 ## 3 145 150 178 163 172 178 199 199 184 162 146 166 1951 ## 4 171 180 193 181 183 218 230 242 209 191 172 194 1952 ## 5 196 196 236 235 229 243 264 272 237 211 180 201 1953 ## 6 204 188 235 227 234 264 302 293 259 229 203 229 1954 . 년도별 승객 수를 합산하고, 전년 대비 승객 수 증감률을 계산합니다. # 데이터 합산 data2 &lt;- data %&gt;% mutate( `승객 수` = rowSums(across(1:12)), `전년 대비 승객 수 증감률` = (`승객 수` - lag(`승객 수`)) / lag(`승객 수`) ) %&gt;% select(년도, `승객 수`, `전년 대비 승객 수 증감률`) # 데이터 확인 head(data2) . ## 년도 승객 수 전년 대비 승객 수 증감률 ## 1 1949 1520 NA ## 2 1950 1676 0.10263158 ## 3 1951 2042 0.21837709 ## 4 1952 2364 0.15768854 ## 5 1953 2700 0.14213198 ## 6 1954 2867 0.06185185 . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%ED%98%BC%ED%95%A9%ED%98%95%20%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%9E%91%EC%84%B1.html#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%ED%98%BC%ED%95%A9%ED%98%95%20%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%9E%91%EC%84%B1.html#데이터-준비"
  },"63": {
    "doc": "혼합형 그래프 작성",
    "title": "혼합형 그래프 작성",
    "content": "년도별 승객 수를 나타내는 기본 막대그래프를 작성합니다. # 패키지 로드 library(ggplot2) # 막대그래프 생성 ggplot(data = data2) + geom_col(aes(x = 년도, y = `승객 수`), width = 0.6) + scale_x_continuous(n.breaks = 12) + theme_bw() . 전년 대비 승객 수 증감률을 선그래프로 추가합니다. 그러나 값의 범위 차이로 인해 선그래프가 잘 보이지 않습니다. # 선그래프 추가 ggplot(data = data2) + geom_col(aes(x = 년도, y = `승객 수`), width = 0.6) + geom_line(aes(x = 년도, y = `전년 대비 승객 수 증감률`)) + scale_x_continuous(n.breaks = 12) + theme_bw() . 적절한 상수를 곱해 선그래프의 위치를 조정합니다. 상수(coeff)는 승객 수와 증감률의 상대적 값을 고려해 계산합니다. # 상수 계산 coeff &lt;- max(data2$`승객 수`, na.rm = TRUE) / (max(data2$`전년 대비 승객 수 증감률`, na.rm = TRUE) * 2) # 조정된 선그래프 생성 ggplot(data = data2) + geom_col(aes(x = 년도, y = `승객 수`), width = 0.6) + geom_line(aes(x = 년도, y = `전년 대비 승객 수 증감률` * coeff)) + scale_x_continuous(n.breaks = 12) + theme_bw() . 선그래프의 실제 값을 나타내기 위해 보조축을 추가합니다. 두 번째 y축은 scale_y_continuous 함수의 sec.axis 인자를 통해 추가할 수 있습니다. # 이중축 추가 ggplot(data = data2) + geom_col(aes(x = 년도, y = `승객 수`), width = 0.6) + geom_line(aes(x = 년도, y = `전년 대비 승객 수 증감률` * coeff)) + scale_x_continuous(n.breaks = 12) + scale_y_continuous( name = \"승객 수(천명)\", labels = scales::comma_format(), sec.axis = sec_axis(~./coeff, name = \"전년 대비 승객 수 증감률(%)\", labels = scales::percent_format()) ) + theme_bw() . 그래프의 막대와 선의 의미를 명확히 하기 위해 범례를 추가합니다. 범례 제목과 위치를 조정하여 깔끔한 그래프를 완성합니다. 범례를 추가하기 위해 geom_col(aes()) 안에 fill=\"승객 수\"를 추가하고, geom_line(aes()) 안에 color=\"전년 대비 승객 수 증감률\"을 추가합니다. 각각의 색상을 지정하기 위해 scale_fill_manual(values=\"gray40\"), scale_color_manual(values=\"gray70\")를 추가합니다. theme에서 범례와 관련된 제목, 배경색, 위치, 여백을 조정해 줍니다. 여기서는 범례 제목, 배경색, 여백을 없앴고, 화면 상에서 좌측 상부에 범례가 위치하도록 조정했습니다. ggplot(data = data2) + geom_col(aes(x = 년도, y = `승객 수`, fill = \"승객 수\"), width = 0.6) + geom_line(aes(x = 년도, y = `전년 대비 승객 수 증감률` * coeff, color = \"전년 대비 승객 수 증감률\")) + scale_fill_manual(values = \"gray40\") + scale_color_manual(values = \"gray70\") + scale_x_continuous(n.breaks = 12) + scale_y_continuous( name = \"승객 수(천명)\", labels = scales::comma_format(), sec.axis = sec_axis(~./coeff, name = \"전년 대비 승객 수 증감률(%)\", labels = scales::percent_format()) ) + theme_bw() + theme( legend.title = element_blank(), legend.background = element_blank(), legend.position = c(0.20, 0.90), legend.margin = margin(0, 0, 0, 0) ) . 혼합형 그래프를 활용하면 두 가지 데이터를 동시에 보여줄 수 있습니다. 위 코드를 참고해서 여러분 데이터에 맞는 혼합형 그래프를 작성해 보세요! . ",
    "url": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%ED%98%BC%ED%95%A9%ED%98%95%20%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%9E%91%EC%84%B1.html",
    
    "relUrl": "/docs/%EC%B0%A8%ED%8A%B8%20%ED%8C%81/%ED%98%BC%ED%95%A9%ED%98%95%20%EA%B7%B8%EB%9E%98%ED%94%84%20%EC%9E%91%EC%84%B1.html"
  }
}
